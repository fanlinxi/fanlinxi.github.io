<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Git在不提交代码的情况下切换分支并且不携带代码到其他分支</title>
      <link href="/2019/07/06/Git%E5%9C%A8%E4%B8%8D%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF%E5%B9%B6%E4%B8%94%E4%B8%8D%E6%90%BA%E5%B8%A6%E4%BB%A3%E7%A0%81%E5%88%B0%E5%85%B6%E4%BB%96%E5%88%86%E6%94%AF/"/>
      <url>/2019/07/06/Git%E5%9C%A8%E4%B8%8D%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF%E5%B9%B6%E4%B8%94%E4%B8%8D%E6%90%BA%E5%B8%A6%E4%BB%A3%E7%A0%81%E5%88%B0%E5%85%B6%E4%BB%96%E5%88%86%E6%94%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="Git在不提交代码的情况下切换分支并且不携带代码到其他分支"><a href="#Git在不提交代码的情况下切换分支并且不携带代码到其他分支" class="headerlink" title="Git在不提交代码的情况下切换分支并且不携带代码到其他分支"></a>Git在不提交代码的情况下切换分支并且不携带代码到其他分支</h2><h2 id="提交代码到暂存区"><a href="#提交代码到暂存区" class="headerlink" title="提交代码到暂存区"></a>提交代码到暂存区</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><a id="more"></a><p><img src="http://106.13.51.1:8100/imgs/2019/07/2cad27f471d0daa2.png" alt></p><h2 id="从暂存区取出代码"><a href="#从暂存区取出代码" class="headerlink" title="从暂存区取出代码"></a>从暂存区取出代码</h2><p>在任何一个分支都能取出代码的，因为代码是放到暂存区的是公共区域</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><p><img src="http://106.13.51.1:8100/imgs/2019/07/ad50ab741f8e8268.png" alt></p><h2 id="查看暂存区用-stash命令存储的代码"><a href="#查看暂存区用-stash命令存储的代码" class="headerlink" title="查看暂存区用 stash命令存储的代码"></a>查看暂存区用 stash命令存储的代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><p><img src="http://106.13.51.1:8100/imgs/2019/07/c1093f82cafd618e.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IE不打开F12开发人员工具无法执行js的问题</title>
      <link href="/2019/07/06/IE%E4%B8%8D%E6%89%93%E5%BC%80F12%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E5%B7%A5%E5%85%B7%E6%97%A0%E6%B3%95%E6%89%A7%E8%A1%8Cjs%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/07/06/IE%E4%B8%8D%E6%89%93%E5%BC%80F12%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E5%B7%A5%E5%85%B7%E6%97%A0%E6%B3%95%E6%89%A7%E8%A1%8Cjs%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在IE浏览器下，js方法不执行，但是打开F12开发者工具执行却没问题。</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">把js方法中的console.log()删除掉就可以了，因为部分IE版本不支持console.log()方法(但是打开开发者工具就支持了...)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库插入数据报错SQLSyntaxErrorException</title>
      <link href="/2019/07/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%94%99SQLSyntaxErrorException/"/>
      <url>/2019/07/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%94%99SQLSyntaxErrorException/</url>
      
        <content type="html"><![CDATA[<h2 id="错误日志"><a href="#错误日志" class="headerlink" title="错误日志"></a>错误日志</h2><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2019-06-09 15:14:20.933 ERROR 7788 --- [nio-8400-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement] with root cause</span><br><span class="line"></span><br><span class="line">java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;describe, money, month, title, type, userid, year, id) values (&apos;2019-06-09 02:14&apos; at line 1</span><br></pre></td></tr></table></figure><p><img src="http://106.13.51.1:8100/imgs/2019/07/310aec12ba370333.png" alt></p><h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">该表中有字段名与MySQL关键字一致</span><br></pre></td></tr></table></figure><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">修改相关字段名称即可</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Word中条形码不显示</title>
      <link href="/2019/07/06/Word%E4%B8%AD%E6%9D%A1%E5%BD%A2%E7%A0%81%E4%B8%8D%E6%98%BE%E7%A4%BA/"/>
      <url>/2019/07/06/Word%E4%B8%AD%E6%9D%A1%E5%BD%A2%E7%A0%81%E4%B8%8D%E6%98%BE%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在word中条形码没有显示</span><br></pre></td></tr></table></figure><p><img src="http://106.13.51.1:8100/imgs/2019/06/e0634a1d94966588.png" alt></p><a id="more"></a><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">下载对应字体安装，直接打开安装即可</span><br></pre></td></tr></table></figure><p><img src="http://106.13.51.1:8100/imgs/2019/06/1cd0a33efb1b46df.png" alt></p><p><img src="http://106.13.51.1:8100/imgs/2019/06/5f35f56e6068bad1.png" alt></p><h2 id="字体下载推荐网站"><a href="#字体下载推荐网站" class="headerlink" title="字体下载推荐网站"></a>字体下载推荐网站</h2><p><a href="http://www.downcc.com/" target="_blank" rel="noopener">绿色资源网</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux程序因路径格式导致的IO(createFileExclusively)问题</title>
      <link href="/2019/07/06/Linux%E7%A8%8B%E5%BA%8F%E5%9B%A0%E8%B7%AF%E5%BE%84%E6%A0%BC%E5%BC%8F%E5%AF%BC%E8%87%B4%E7%9A%84IO(createFileExclusively)%E9%97%AE%E9%A2%98/"/>
      <url>/2019/07/06/Linux%E7%A8%8B%E5%BA%8F%E5%9B%A0%E8%B7%AF%E5%BE%84%E6%A0%BC%E5%BC%8F%E5%AF%BC%E8%87%B4%E7%9A%84IO(createFileExclusively)%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>在window本地调试代码时无错误，但是在Linux服务器上运行会报错java.io.UnixFileSystem.createFileExclusively(Native Method)</p><p><img src="http://106.13.51.1:8100/imgs/2019/07/ec3553f5ca7b9901.png" alt></p><a id="more"></a><h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p>文件路径格式问题，在window上路径若为C:\Users\user\Desktop\/Path.txt，对文件进行操作不会出错，在Linux上文件路径若为usr/www/wwwroot/\Path.txt，对文件进行操作会报错createFileExclusively。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>格式化文件路径即可</p><p>例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String path = <span class="string">"C:\\\\Users\\\\sinosoft\\\\Desktop\\\\/Path.txt"</span>;</span><br><span class="line">path = path.replaceAll(<span class="string">"\\\\"</span>, <span class="string">"/"</span>).replaceAll(<span class="string">"//"</span>, <span class="string">"/"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySql修改&amp;添加数据错误22001</title>
      <link href="/2019/07/06/MySql%E4%BF%AE%E6%94%B9&amp;%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF22001/"/>
      <url>/2019/07/06/MySql%E4%BF%AE%E6%94%B9&amp;%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF22001/</url>
      
        <content type="html"><![CDATA[<h2 id="错误详情"><a href="#错误详情" class="headerlink" title="错误详情"></a>错误详情</h2><p><img src="http://106.13.51.1:8100/imgs/2019/06/ac0a36765560ebf7.png" alt></p><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为添加的数据值的长度大于字段的长度，如vachar(1)字段中添加一个varchar(2)(如:AA)长度的值就会报错</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">修改字段长度或修改数据值长度</span><br></pre></td></tr></table></figure><h2 id="修改字段长度SQL"><a href="#修改字段长度SQL" class="headerlink" title="修改字段长度SQL"></a>修改字段长度SQL</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> [表名] <span class="keyword">modify</span> <span class="keyword">column</span> [字段名] [类型];</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PDF转tif图片出现方框</title>
      <link href="/2019/07/06/PDF%E8%BD%ACtif%E5%87%BA%E7%8E%B0%E6%96%B9%E6%A1%86/"/>
      <url>/2019/07/06/PDF%E8%BD%ACtif%E5%87%BA%E7%8E%B0%E6%96%B9%E6%A1%86/</url>
      
        <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PDF转tif图片时，tif图片上出现了方框</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个PDF是由HTML转成的，而HTML中首行缩进的样式使用了&amp;nbsp&amp;nbsp作为空格使用,这样虽然实现了首行缩进的样式，并且PDF没有任何错误，但是PDF转成的tif图片却会出现方框。</span><br></pre></td></tr></table></figure><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">把HTML的&amp;nbsp干掉即可</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySql语句整理</title>
      <link href="/2019/07/06/MySql%E8%AF%AD%E5%8F%A5%E6%95%B4%E7%90%86/"/>
      <url>/2019/07/06/MySql%E8%AF%AD%E5%8F%A5%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [数据库名];</span><br></pre></td></tr></table></figure><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><a id="more"></a><h4 id="释义"><a href="#释义" class="headerlink" title="释义"></a>释义</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AUTO_INCREMENT主键自动增长</span><br><span class="line">PRIMARY KEY主键字段名指定</span><br><span class="line">NOT NULL字段不为空</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> [表名称](</span><br><span class="line">   <span class="string">'id'</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'主键id'</span>,</span><br><span class="line">   [字段名<span class="number">2</span>] [数据类型]  <span class="keyword">COMMENT</span> [字段名注释信息],</span><br><span class="line">   [字段名<span class="number">3</span>] [数据类型] <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> [字段名注释信息],</span><br><span class="line">   [字段名<span class="number">4</span>] [数据类型] <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> [字段名注释信息]</span><br><span class="line">   PRIMARY <span class="keyword">KEY</span> ( <span class="string">`id`</span> )</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><h3 id="添加字段"><a href="#添加字段" class="headerlink" title="添加字段"></a>添加字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> [表名称] <span class="keyword">add</span> [字段名] [数据类型];</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> [表名称] <span class="keyword">add</span> [字段名] [数据类型] <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> [表名称] ([字段名<span class="number">1</span>],[字段名<span class="number">2</span>],[字段名<span class="number">3</span>]) <span class="keyword">VALUES</span> ([数据<span class="number">1</span>], [数据<span class="number">2</span>], [数据<span class="number">3</span>]);</span><br></pre></td></tr></table></figure><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> [数据库名];</span><br></pre></td></tr></table></figure><h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [表名称];</span><br></pre></td></tr></table></figure><h3 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> [表名] <span class="keyword">drop</span> <span class="keyword">column</span> [字段名]</span><br></pre></td></tr></table></figure><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> [表名称] <span class="keyword">WHERE</span> [字段名] = [条件值];</span><br></pre></td></tr></table></figure><h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><h3 id="修改字段"><a href="#修改字段" class="headerlink" title="修改字段"></a>修改字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> [表名称] <span class="keyword">modify</span> <span class="keyword">column</span> [字段名] [数据类型];</span><br></pre></td></tr></table></figure><h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> [表名称] <span class="keyword">SET</span> [字段名] = [字段名] <span class="keyword">WHERE</span> [字段名] = [条件值];</span><br><span class="line"><span class="keyword">UPDATE</span> [表名称] <span class="keyword">SET</span> [字段名] = [字段名],[字段名] = [字段名] <span class="keyword">WHERE</span> [字段名] = [条件值];</span><br></pre></td></tr></table></figure><h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><h3 id="查询数据​"><a href="#查询数据​" class="headerlink" title="查询数据​"></a>查询数据​</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> [表名称];</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> [表名称] <span class="keyword">WHERE</span> [字段名] = [数据值];</span><br><span class="line"><span class="keyword">SELECT</span> [字段名] <span class="keyword">FROM</span> [表名称] <span class="keyword">WHERE</span> [字段名] = [数据值];</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS判断判断字符串1中是否包含字符串2</title>
      <link href="/2019/07/06/JS%E5%88%A4%E6%96%AD%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B21%E4%B8%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E5%AD%97%E7%AC%A6%E4%B8%B22/"/>
      <url>/2019/07/06/JS%E5%88%A4%E6%96%AD%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B21%E4%B8%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E5%AD%97%E7%AC%A6%E4%B8%B22/</url>
      
        <content type="html"><![CDATA[<h2 id="判断字符串1中是否包含字符串2"><a href="#判断字符串1中是否包含字符串2" class="headerlink" title="判断字符串1中是否包含字符串2"></a>判断字符串1中是否包含字符串2</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断字符串1中是否包含字符串2</span></span><br><span class="line"><span class="comment"> * @param obj1 字符串1</span></span><br><span class="line"><span class="comment"> * @param obj2 字符串2</span></span><br><span class="line"><span class="comment"> * @returns &#123;boolean&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>(<span class="params">obj1,obj2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(obj1 == <span class="string">""</span> || obj1 == <span class="literal">null</span> || obj1 == <span class="string">"undefined"</span> || obj1 == <span class="literal">undefined</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(obj1.indexOf(obj2) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端校验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery控制input只能输入数字</title>
      <link href="/2019/07/06/jQuery%E6%8E%A7%E5%88%B6input%E5%8F%AA%E8%83%BD%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%97/"/>
      <url>/2019/07/06/jQuery%E6%8E%A7%E5%88%B6input%E5%8F%AA%E8%83%BD%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"money"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入金额"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display:none;border:0"</span> <span class="attr">id</span>=<span class="string">"number"</span> &gt;</span>请输入数字<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#money"</span>).keyup(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> c = $(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/[^\d]/</span>.test(c.val())) &#123;</span><br><span class="line">            <span class="keyword">var</span> temp = c.val().replace(<span class="regexp">/[^\d]/g</span>, <span class="string">''</span>);</span><br><span class="line">            $(<span class="keyword">this</span>).val(temp);</span><br><span class="line">            $(<span class="string">"#number"</span>).css(&#123;<span class="string">'display'</span>: <span class="string">'block'</span>&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">"#number"</span>).css(&#123;<span class="string">'display'</span>: <span class="string">'none'</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端校验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java根据ip获取地理位置</title>
      <link href="/2019/04/11/Java%E6%A0%B9%E6%8D%AEip%E8%8E%B7%E5%8F%96%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE/"/>
      <url>/2019/04/11/Java%E6%A0%B9%E6%8D%AEip%E8%8E%B7%E5%8F%96%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="调用百度API，根据ip获取地理位置"><a href="#调用百度API，根据ip获取地理位置" class="headerlink" title="调用百度API，根据ip获取地理位置"></a>调用百度API，根据ip获取地理位置</h2><p>百度API地址:<a href="http://api.map.baidu.com/lbsapi/cloud/ip-location-api.htm" target="_blank" rel="noopener">URL</a></p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.json.JSONException;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 调用百度地图API，根据ip地址获取地理位置，可精确到市</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/6 22:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddressUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">readAll</span><span class="params">(Reader rd)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> cp;</span><br><span class="line">        <span class="keyword">while</span> ((cp = rd.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            sb.append((<span class="keyword">char</span>) cp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title">readJsonFromUrl</span><span class="params">(String url)</span> <span class="keyword">throws</span> IOException, JSONException </span>&#123;</span><br><span class="line">        InputStream is = <span class="keyword">new</span> URL(url).openStream();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            BufferedReader rd = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is, Charset.forName(<span class="string">"UTF-8"</span>)));</span><br><span class="line">            String jsonText = readAll(rd);</span><br><span class="line">            JSONObject json = <span class="keyword">new</span> JSONObject(jsonText);</span><br><span class="line">            <span class="keyword">return</span> json;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            is.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAddressByIp</span><span class="params">(String ip)</span> <span class="keyword">throws</span> IOException, JSONException </span>&#123;</span><br><span class="line">        <span class="comment">//这里调用百度的ip定位api服务 详见 http://api.map.baidu.com/lbsapi/cloud/ip-location-api.htm</span></span><br><span class="line">        JSONObject json = readJsonFromUrl(<span class="string">"http://api.map.baidu.com/location/ip?ak=申请的秘钥&amp;ip="</span>+ip);</span><br><span class="line">        <span class="keyword">return</span> (String) ((JSONObject) json.get(<span class="string">"content"</span>)).get(<span class="string">"address"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> 百度API </tag>
            
            <tag> IP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java集成shiro</title>
      <link href="/2019/04/11/Java%E9%9B%86%E6%88%90shiro/"/>
      <url>/2019/04/11/Java%E9%9B%86%E6%88%90shiro/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- shiro权限控制框架 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.2&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="配置类"><a href="#配置类" class="headerlink" title="配置类"></a>配置类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.mgt.SessionManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.mgt.eis.SessionDAO;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.session.mgt.DefaultWebSessionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: shiro配置文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/6 21:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">//将自己的验证方式加入容器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserRealm <span class="title">myShiroRealm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UserRealm myShiroRealm = <span class="keyword">new</span> UserRealm();</span><br><span class="line">        <span class="keyword">return</span> myShiroRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//权限管理，配置主要是Realm的管理认证</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> org.apache.shiro.mgt.<span class="function">SecurityManager <span class="title">securityManager</span><span class="params">(SessionManager sessionManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager securityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        securityManager.setSessionManager(sessionManager);</span><br><span class="line">        securityManager.setRealm(myShiroRealm());</span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//Filter工厂，设置对应的过滤条件和跳转条件</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">// 拦截器集合</span></span><br><span class="line">        Map&lt;String, String&gt; filterChainDefinitionMap = <span class="keyword">new</span> LinkedHashMap&lt;String, String&gt;();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 配置不会被拦截的链接 顺序判断  anon(可以匿名访问的资源)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//静态资源</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/css/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/font/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/images/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/js/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/lay/**"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/layui.all.js"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/layui.js"</span>, <span class="string">"anon"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//登录、注册、忘记密码、申请解禁账号</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/user/getUser"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/forget"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/changePassword"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/reg"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/userReg"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/userRepeat"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/UserLifting"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/userLift"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/PhoneCode"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/MailCode"</span>, <span class="string">"anon"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/login/error"</span>, <span class="string">"anon"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置退出 过滤器,其中的具体的退出代码Shiro已经替我们实现了</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/logout"</span>, <span class="string">"logout"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//authc(需要认证访问的资源)</span></span><br><span class="line">        filterChainDefinitionMap.put(<span class="string">"/**"</span>, <span class="string">"authc"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//登录</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/login"</span>);</span><br><span class="line">        <span class="comment">//首页</span></span><br><span class="line">        shiroFilterFactoryBean.setSuccessUrl(<span class="string">"/index"</span>);</span><br><span class="line">        <span class="comment">//错误页面，认证不通过跳转</span></span><br><span class="line">        shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">"/login/error"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//拦截器集合放入shiroFilterFactoryBean中</span></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加入注解的使用，不加入这个注解不生效</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuthorizationAttributeSourceAdvisor <span class="title">authorizationAttributeSourceAdvisor</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        AuthorizationAttributeSourceAdvisor advisor = <span class="keyword">new</span> AuthorizationAttributeSourceAdvisor();</span><br><span class="line">        advisor.setSecurityManager(securityManager);</span><br><span class="line">        <span class="keyword">return</span> advisor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * sessionDAO(可以拿到session中的信息)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SessionDAO <span class="title">sessionDAO</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> EnterpriseCacheSessionDAO();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SessionManager <span class="title">sessionManager</span><span class="params">(SessionDAO sessionDAO)</span></span>&#123;</span><br><span class="line">        DefaultWebSessionManager manager = <span class="keyword">new</span> DefaultWebSessionManager();</span><br><span class="line">        manager.setSessionDAO(sessionDAO);</span><br><span class="line">        manager.setGlobalSessionTimeout(<span class="number">3600000</span>);</span><br><span class="line">        manager.setSessionValidationInterval(<span class="number">3600000</span>);</span><br><span class="line">        <span class="keyword">return</span> manager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="授权与认证类"><a href="#授权与认证类" class="headerlink" title="授权与认证类"></a>授权与认证类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.jeys.common.util.ShiroUtils;</span><br><span class="line"><span class="keyword">import</span> com.jeys.system.menu.service.MenuService;</span><br><span class="line"><span class="keyword">import</span> com.jeys.system.user.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.jeys.system.user.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: shiroRealm(用来授权与认证)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/6 21:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">MenuService menuService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection arg0)</span> </span>&#123;</span><br><span class="line">Long userId = ShiroUtils.getUserId();</span><br><span class="line"><span class="comment">//查询权限集合，我这里是从数据库动态获取的</span></span><br><span class="line">Set&lt;String&gt; perms = menuService.findMenuPermissionsByUserId(userId);</span><br><span class="line">SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">info.setStringPermissions(perms);</span><br><span class="line"><span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">String username = (String) token.getPrincipal();</span><br><span class="line">String password = <span class="keyword">new</span> String((<span class="keyword">char</span>[]) token.getCredentials());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询用户信息</span></span><br><span class="line">User user = userService.findUserByUsername(username);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 账号不存在</span></span><br><span class="line"><span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> UnknownAccountException(<span class="string">"账号或密码不正确"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码错误</span></span><br><span class="line"><span class="keyword">if</span> (!password.equals(user.getPassword())) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IncorrectCredentialsException(<span class="string">"账号或密码不正确"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 账号锁定</span></span><br><span class="line"><span class="keyword">if</span> (user.getStatus() != <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> LockedAccountException(<span class="string">"账号已被锁定,请联系管理员"</span>);</span><br><span class="line">&#125;</span><br><span class="line">SimpleAuthenticationInfo info = <span class="keyword">new</span> SimpleAuthenticationInfo(user, password, getName());</span><br><span class="line"><span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ShiroUtils"><a href="#ShiroUtils" class="headerlink" title="ShiroUtils"></a><a href="http://106.13.51.1:8200/index.php/2019/05/09/shiro%E5%B0%81%E8%A3%85%E6%96%B9%E6%B3%95/" target="_blank" rel="noopener">ShiroUtils</a></h3><h2 id="user类"><a href="#user类" class="headerlink" title="user类"></a>user类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.persistence.Basic;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Column;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/20 11:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> userId;</span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Long sex;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line">    <span class="keyword">private</span> Long status;</span><br><span class="line">    <span class="keyword">private</span> Timestamp creatTime;</span><br><span class="line">    <span class="keyword">private</span> Timestamp modifiedTime;</span><br><span class="line">    <span class="keyword">private</span> Timestamp birthday;</span><br><span class="line">    <span class="keyword">private</span> String liveCoutry;</span><br><span class="line">    <span class="keyword">private</span> String liveProvince;</span><br><span class="line">    <span class="keyword">private</span> String liveCity;</span><br><span class="line">    <span class="keyword">private</span> String liveDistrict;</span><br><span class="line">    <span class="keyword">private</span> Long deptId;</span><br><span class="line">    <span class="keyword">private</span> Long picId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"user_id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getUserId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserId</span><span class="params">(<span class="keyword">long</span> userId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"nickname"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNickname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nickname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNickname</span><span class="params">(String nickname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nickname = nickname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"username"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"password"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"sex"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(Long sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"email"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"mobile"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMobile</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMobile</span><span class="params">(String mobile)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"status"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStatus</span><span class="params">(Long status)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"creat_time"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getCreatTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> creatTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCreatTime</span><span class="params">(Timestamp creatTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.creatTime = creatTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"modified_time"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getModifiedTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> modifiedTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setModifiedTime</span><span class="params">(Timestamp modifiedTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.modifiedTime = modifiedTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"birthday"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Timestamp birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_coutry"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveCoutry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveCoutry;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveCoutry</span><span class="params">(String liveCoutry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveCoutry = liveCoutry;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_province"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveProvince</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveProvince;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveProvince</span><span class="params">(String liveProvince)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveProvince = liveProvince;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_city"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveCity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveCity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveCity</span><span class="params">(String liveCity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveCity = liveCity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_district"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveDistrict</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveDistrict;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveDistrict</span><span class="params">(String liveDistrict)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveDistrict = liveDistrict;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"dept_id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getDeptId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> deptId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDeptId</span><span class="params">(Long deptId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.deptId = deptId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"pic_id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getPicId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> picId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPicId</span><span class="params">(Long picId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.picId = picId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        User user = (User) o;</span><br><span class="line">        <span class="keyword">return</span> userId == user.userId &amp;&amp;</span><br><span class="line">                Objects.equals(nickname, user.nickname) &amp;&amp;</span><br><span class="line">                Objects.equals(username, user.username) &amp;&amp;</span><br><span class="line">                Objects.equals(password, user.password) &amp;&amp;</span><br><span class="line">                Objects.equals(sex, user.sex) &amp;&amp;</span><br><span class="line">                Objects.equals(email, user.email) &amp;&amp;</span><br><span class="line">                Objects.equals(mobile, user.mobile) &amp;&amp;</span><br><span class="line">                Objects.equals(status, user.status) &amp;&amp;</span><br><span class="line">                Objects.equals(creatTime, user.creatTime) &amp;&amp;</span><br><span class="line">                Objects.equals(modifiedTime, user.modifiedTime) &amp;&amp;</span><br><span class="line">                Objects.equals(birthday, user.birthday) &amp;&amp;</span><br><span class="line">                Objects.equals(liveCoutry, user.liveCoutry) &amp;&amp;</span><br><span class="line">                Objects.equals(liveProvince, user.liveProvince) &amp;&amp;</span><br><span class="line">                Objects.equals(liveCity, user.liveCity) &amp;&amp;</span><br><span class="line">                Objects.equals(liveDistrict, user.liveDistrict) &amp;&amp;</span><br><span class="line">                Objects.equals(deptId, user.deptId) &amp;&amp;</span><br><span class="line">                Objects.equals(picId, user.picId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Objects.hash(userId, nickname, username, password, sex, email, mobile, status, creatTime, modifiedTime, birthday, liveCoutry, liveProvince, liveCity, liveDistrict, deptId, picId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java监控异常处理错误页面</title>
      <link href="/2019/04/11/Java%E7%9B%91%E6%8E%A7%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2/"/>
      <url>/2019/04/11/Java%E7%9B%91%E6%8E%A7%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="监控异常处理错误页面"><a href="#监控异常处理错误页面" class="headerlink" title="监控异常处理错误页面"></a>监控异常处理错误页面</h2><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.error.ErrorController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 处理错误页面</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/19 15:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorHandleController</span> <span class="keyword">implements</span> <span class="title">ErrorController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(ErrorHandleController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/error"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleError</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        <span class="comment">//获取statusCode:401,404,500</span></span><br><span class="line">        Integer statusCode = (Integer) request.getAttribute(<span class="string">"javax.servlet.error.status_code"</span>);</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"系统出现错误，错误状态码为"</span> + statusCode);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(statusCode == <span class="number">401</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"/error/error"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(statusCode == <span class="number">404</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"/error/404"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(statusCode == <span class="number">403</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"/error/error"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"/error/error"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/error"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云发送短信</title>
      <link href="/2019/04/11/%E9%98%BF%E9%87%8C%E4%BA%91%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1/"/>
      <url>/2019/04/11/%E9%98%BF%E9%87%8C%E4%BA%91%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--阿里云短信核心包--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.aliyun&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt;</span><br><span class="line">&lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;version&gt;3.2.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--阿里云短信业务包从某博主个人maven仓库引得随时可能被他删除--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.github.1991wangliang&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;aliyun-java-sdk-dysmsapi&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="阿里云发送短信"><a href="#阿里云发送短信" class="headerlink" title="阿里云发送短信"></a>阿里云发送短信</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.aliyuncs.DefaultAcsClient;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.IAcsClient;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.dysmsapi.model.v20170525.SendSmsRequest;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.dysmsapi.model.v20170525.SendSmsResponse;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.exceptions.ClientException;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.profile.DefaultProfile;</span><br><span class="line"><span class="keyword">import</span> com.aliyuncs.profile.IClientProfile;</span><br><span class="line"><span class="keyword">import</span> com.jeys.system.mail.service.MailService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 阿里云发送短信</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/20 16:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PhoneUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//产品名称:云通信短信API产品,开发者无需替换</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String product = <span class="string">"Dysmsapi"</span>;</span><br><span class="line">    <span class="comment">//产品域名,开发者无需替换</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String domain = <span class="string">"dysmsapi.aliyuncs.com"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 此处需要替换成开发者自己的AK(在阿里云访问控制台寻找)</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String accessKeyId = <span class="string">"秘钥"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String accessKeySecret = <span class="string">"秘钥"</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 阿里云发送短信</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cellphone 被发送者的手机号码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ClientException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SendSmsResponse <span class="title">sendSms</span><span class="params">(String cellphone)</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//可自助调整超时时间</span></span><br><span class="line">        System.setProperty(<span class="string">"sun.net.client.defaultConnectTimeout"</span>, <span class="string">"10000"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"sun.net.client.defaultReadTimeout"</span>, <span class="string">"10000"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化acsClient,暂不支持region化</span></span><br><span class="line">        IClientProfile profile = DefaultProfile.getProfile(<span class="string">"cn-hangzhou"</span>, accessKeyId, accessKeySecret);</span><br><span class="line">        DefaultProfile.addEndpoint(<span class="string">"cn-hangzhou"</span>, <span class="string">"cn-hangzhou"</span>, product, domain);</span><br><span class="line">        IAcsClient acsClient = <span class="keyword">new</span> DefaultAcsClient(profile);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//组装请求对象-具体描述见控制台-文档部分内容</span></span><br><span class="line">        SendSmsRequest request = <span class="keyword">new</span> SendSmsRequest();</span><br><span class="line">        <span class="comment">//必填:待发送手机号</span></span><br><span class="line">        request.setPhoneNumbers(cellphone);</span><br><span class="line">        <span class="comment">//必填:短信签名-可在短信控制台中找到</span></span><br><span class="line">        request.setSignName(<span class="string">"已经通过审核的短信签名"</span>);</span><br><span class="line">        <span class="comment">//必填:短信模板-可在短信控制台中找到</span></span><br><span class="line">        request.setTemplateCode(<span class="string">"已经通过审核的短信模板号"</span>);</span><br><span class="line">        <span class="comment">//可选:模板中的变量替换JSON串,如模板内容为"亲爱的$&#123;name&#125;,您的验证码为$&#123;code&#125;"时,此处的值为</span></span><br><span class="line"></span><br><span class="line">        request.setTemplateParam(<span class="string">"&#123;\"name\":\"Tom\", \"code\":\""</span>+PhoneVerificationCode+<span class="string">"\"&#125;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//选填-上行短信扩展码(无特殊需求用户请忽略此字段)</span></span><br><span class="line">        <span class="comment">//request.setSmsUpExtendCode("90997");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//可选:outId为提供给业务方扩展字段,最终在短信回执消息中将此值带回给调用者</span></span><br><span class="line">        request.setOutId(<span class="string">"yourOutId"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String content = <span class="string">"短信内容"</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//hint 此处可能会抛出异常，注意catch</span></span><br><span class="line">            SendSmsResponse sendSmsResponse = acsClient.getAcsResponse(request);</span><br><span class="line">            <span class="keyword">return</span> sendSmsResponse;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ClientException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendSmsTest</span><span class="params">()</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//发短信</span></span><br><span class="line">        SendSmsResponse response = sendSms(<span class="string">"15333690708"</span>,CommonUtils.getPhoneVerificationCode());</span><br><span class="line">        System.out.println(<span class="string">"短信接口返回的数据----------------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Code="</span> + response.getCode());</span><br><span class="line">        System.out.println(<span class="string">"Message="</span> + response.getMessage());</span><br><span class="line">        System.out.println(<span class="string">"RequestId="</span> + response.getRequestId());</span><br><span class="line">        System.out.println(<span class="string">"BizId="</span> + response.getBizId());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> 短信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java获取session/Request</title>
      <link href="/2019/04/11/Java%E8%8E%B7%E5%8F%96sessionRequest/"/>
      <url>/2019/04/11/Java%E8%8E%B7%E5%8F%96sessionRequest/</url>
      
        <content type="html"><![CDATA[<h2 id="获取session-Request"><a href="#获取session-Request" class="headerlink" title="获取session/Request"></a>获取session/Request</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 获取session/Request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/18 10:35</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpContextUtils</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpServletRequest <span class="title">getHttpServletRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpSession <span class="title">getSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">HttpServletRequest httpServletRequest = HttpContextUtils.getHttpServletRequest();</span><br><span class="line"><span class="keyword">return</span> httpServletRequest.getSession();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> session </tag>
            
            <tag> Request </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站(博客)添加DaoVoice</title>
      <link href="/2019/04/11/%E7%BD%91%E7%AB%99-%E5%8D%9A%E5%AE%A2-%E6%B7%BB%E5%8A%A0DaoVoice/"/>
      <url>/2019/04/11/%E7%BD%91%E7%AB%99-%E5%8D%9A%E5%AE%A2-%E6%B7%BB%E5%8A%A0DaoVoice/</url>
      
        <content type="html"><![CDATA[<p>点击进入 <a href="http://www.daovoice.io" target="_blank" rel="noopener">DaoVoice官网</a> 注册，然后登陆，进入应用设置下的安装到网站页面，如图下图所示。  </p><p><img src="https://upload-images.jianshu.io/upload_images/15089845-c786452996bfea9c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DaoVoice01.png"></p><a id="more"></a><h1 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h1><p>  进入到此界面之后将这三段代码加入自己的布局文件中，我是加入到了head.ejs文件中，如下图所示。  </p><p><img src="https://upload-images.jianshu.io/upload_images/15089845-1e315f746df3af58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DaoVoice02.png"></p><p>  此时刷新页面即可在右下角出现DaoVoice图标，基本配置已经完成，现在可以到应用设置中的应用管理与聊天设置中进行个性设置，设置界面如下。<br><img src="https://upload-images.jianshu.io/upload_images/15089845-92e66350d6f8f95e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DaoVoice03.png"></p><h1 id="next主题"><a href="#next主题" class="headerlink" title="next主题"></a>next主题</h1><p>在blog\themes\next\layout_partials\head.swig中加入以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include &apos;head/custom-head.swig&apos; %&#125;</span><br><span class="line">&#123;% if theme.daovoice %&#125;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&apos;https:&apos; == document.location.protocol ? &apos;https:&apos; : &apos;http:&apos;) + &quot;//widget.daovoice.io/widget/0f81ff2f.js&quot;,&quot;daovoice&quot;)</span><br><span class="line">  daovoice(&apos;init&apos;, &#123;</span><br><span class="line">      app_id: &quot;&#123;&#123;theme.daovoice_app_id&#125;&#125;&quot;</span><br><span class="line">    &#125;);</span><br><span class="line">  daovoice(&apos;update&apos;);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></p><p>然后在主题配置文件blog\themes\next_config.yml中搜索daovoice开启配置加入app_id即可<br><img src="https://upload-images.jianshu.io/upload_images/15089845-c84aa22918ec5acc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DaoVoice04.png"></p>]]></content>
      
      
      <categories>
          
          <category> 建站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里巴巴数据源Druid监控</title>
      <link href="/2019/04/11/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E6%95%B0%E6%8D%AE%E6%BA%90Druid/"/>
      <url>/2019/04/11/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E6%95%B0%E6%8D%AE%E6%BA%90Druid/</url>
      
        <content type="html"><![CDATA[<h2 id="监控页访问路径"><a href="#监控页访问路径" class="headerlink" title="监控页访问路径"></a>监控页访问路径</h2><p>访问路径:项目路径/druid/*</p><p>例如:localhost:8080/druid/login.html</p><h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--阿里巴巴数据源--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.28&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="阿里数据源集成监控"><a href="#阿里数据源集成监控" class="headerlink" title="阿里数据源集成监控"></a>阿里数据源集成监控</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.StatViewServlet;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.WebStatFilter;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Primary;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 阿里数据源集成监控</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/5 23:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidDBConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(DruidDBConfig.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DB_PREFIX = <span class="string">"spring.datasource"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">druidServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"init Druid Servlet Configuration-----------"</span>);</span><br><span class="line">        ServletRegistrationBean servletRegistrationBean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(), <span class="string">"/druid/*"</span>);</span><br><span class="line">        <span class="comment">// IP白名单</span></span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">"allow"</span>, <span class="string">""</span>);</span><br><span class="line">        <span class="comment">// IP黑名单(共同存在时，deny优先于allow)</span></span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">"deny"</span>, <span class="string">""</span>);</span><br><span class="line">        <span class="comment">//控制台管理用户</span></span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">"loginUsername"</span>, <span class="string">""</span>);</span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">"loginPassword"</span>, <span class="string">""</span>);</span><br><span class="line">        <span class="comment">//是否能够重置数据 禁用HTML页面上的“Reset All”功能</span></span><br><span class="line">        servletRegistrationBean.addInitParameter(<span class="string">"resetEnable"</span>, <span class="string">"false"</span>);</span><br><span class="line">        <span class="keyword">return</span> servletRegistrationBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">filterRegistrationBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">        filterRegistrationBean.addUrlPatterns(<span class="string">"/*"</span>);</span><br><span class="line">        filterRegistrationBean.addInitParameter(<span class="string">"exclusions"</span>, <span class="string">"*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"</span>);</span><br><span class="line">        <span class="keyword">return</span> filterRegistrationBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解决 spring.datasource.filters=stat,wall,log4j 无法正常注册进去</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = DB_PREFIX)</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">IDataSourceProperties</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String url;</span><br><span class="line">        <span class="keyword">private</span> String username;</span><br><span class="line">        <span class="keyword">private</span> String password;</span><br><span class="line">        <span class="keyword">private</span> String driverClassName;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> initialSize;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> minIdle;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> maxActive;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> maxWait;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> timeBetweenEvictionRunsMillis;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> minEvictableIdleTimeMillis;</span><br><span class="line">        <span class="keyword">private</span> String validationQuery;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> testWhileIdle;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> testOnBorrow;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> testOnReturn;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> poolPreparedStatements;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> maxPoolPreparedStatementPerConnectionSize;</span><br><span class="line">        <span class="keyword">private</span> String filters;</span><br><span class="line">        <span class="keyword">private</span> String connectionProperties;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span>     <span class="comment">//声明其为Bean实例</span></span><br><span class="line">        <span class="meta">@Primary</span>  <span class="comment">//在同样的DataSource中，首先使用被标注的DataSource</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            DruidDataSource datasource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">            datasource.setUrl(url);</span><br><span class="line">            datasource.setUsername(username);</span><br><span class="line">            datasource.setPassword(password);</span><br><span class="line">            datasource.setDriverClassName(driverClassName);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//configuration</span></span><br><span class="line">            datasource.setInitialSize(initialSize);</span><br><span class="line">            datasource.setMinIdle(minIdle);</span><br><span class="line">            datasource.setMaxActive(maxActive);</span><br><span class="line">            datasource.setMaxWait(maxWait);</span><br><span class="line">            datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);</span><br><span class="line">            datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);</span><br><span class="line">            datasource.setValidationQuery(validationQuery);</span><br><span class="line">            datasource.setTestWhileIdle(testWhileIdle);</span><br><span class="line">            datasource.setTestOnBorrow(testOnBorrow);</span><br><span class="line">            datasource.setTestOnReturn(testOnReturn);</span><br><span class="line">            datasource.setPoolPreparedStatements(poolPreparedStatements);</span><br><span class="line">            datasource.setMaxPoolPreparedStatementPerConnectionSize(maxPoolPreparedStatementPerConnectionSize);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                datasource.setFilters(filters);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                System.err.println(<span class="string">"druid configuration initialization filter: "</span> + e);</span><br><span class="line">            &#125;</span><br><span class="line">            datasource.setConnectionProperties(connectionProperties);</span><br><span class="line">            <span class="keyword">return</span> datasource;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> url;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUrl</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.url = url;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> username;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.username = username;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> password;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.password = password;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getDriverClassName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> driverClassName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDriverClassName</span><span class="params">(String driverClassName)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.driverClassName = driverClassName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getInitialSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> initialSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInitialSize</span><span class="params">(<span class="keyword">int</span> initialSize)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.initialSize = initialSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMinIdle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> minIdle;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMinIdle</span><span class="params">(<span class="keyword">int</span> minIdle)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.minIdle = minIdle;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMaxActive</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> maxActive;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaxActive</span><span class="params">(<span class="keyword">int</span> maxActive)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.maxActive = maxActive;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMaxWait</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> maxWait;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaxWait</span><span class="params">(<span class="keyword">int</span> maxWait)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.maxWait = maxWait;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTimeBetweenEvictionRunsMillis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> timeBetweenEvictionRunsMillis;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTimeBetweenEvictionRunsMillis</span><span class="params">(<span class="keyword">int</span> timeBetweenEvictionRunsMillis)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.timeBetweenEvictionRunsMillis = timeBetweenEvictionRunsMillis;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMinEvictableIdleTimeMillis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> minEvictableIdleTimeMillis;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMinEvictableIdleTimeMillis</span><span class="params">(<span class="keyword">int</span> minEvictableIdleTimeMillis)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.minEvictableIdleTimeMillis = minEvictableIdleTimeMillis;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getValidationQuery</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> validationQuery;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValidationQuery</span><span class="params">(String validationQuery)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.validationQuery = validationQuery;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isTestWhileIdle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> testWhileIdle;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTestWhileIdle</span><span class="params">(<span class="keyword">boolean</span> testWhileIdle)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.testWhileIdle = testWhileIdle;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isTestOnBorrow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> testOnBorrow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTestOnBorrow</span><span class="params">(<span class="keyword">boolean</span> testOnBorrow)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.testOnBorrow = testOnBorrow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isTestOnReturn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> testOnReturn;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTestOnReturn</span><span class="params">(<span class="keyword">boolean</span> testOnReturn)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.testOnReturn = testOnReturn;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPoolPreparedStatements</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> poolPreparedStatements;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPoolPreparedStatements</span><span class="params">(<span class="keyword">boolean</span> poolPreparedStatements)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.poolPreparedStatements = poolPreparedStatements;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMaxPoolPreparedStatementPerConnectionSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> maxPoolPreparedStatementPerConnectionSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaxPoolPreparedStatementPerConnectionSize</span><span class="params">(<span class="keyword">int</span> maxPoolPreparedStatementPerConnectionSize)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.maxPoolPreparedStatementPerConnectionSize = maxPoolPreparedStatementPerConnectionSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getFilters</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> filters;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFilters</span><span class="params">(String filters)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.filters = filters;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getConnectionProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> connectionProperties;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConnectionProperties</span><span class="params">(String connectionProperties)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.connectionProperties = connectionProperties;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Druid </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java邮件发送工具类</title>
      <link href="/2019/04/11/Java%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2019/04/11/Java%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 邮件 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.mail&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mail&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.4.7&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Java自带邮件发送"><a href="#Java自带邮件发送" class="headerlink" title="Java自带邮件发送"></a>Java自带邮件发送</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 163邮箱发送邮件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/20 16:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 163邮箱发送邮件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> addressee 接收邮件邮箱地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> MessagingException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendMail</span><span class="params">(String addressee)</span> <span class="keyword">throws</span> MessagingException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Properties prop=<span class="keyword">new</span> Properties();</span><br><span class="line">        prop.put(<span class="string">"mail.host"</span>,<span class="string">"smtp.163.com"</span> );</span><br><span class="line">        prop.put(<span class="string">"mail.transport.protocol"</span>, <span class="string">"smtp"</span>);</span><br><span class="line">        prop.put(<span class="string">"mail.smtp.auth"</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        String sender = <span class="string">"163邮箱账号"</span>;</span><br><span class="line">        String password = <span class="string">"邮箱密码"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//使用java发送邮件5步骤</span></span><br><span class="line">            <span class="comment">//创建sesssion</span></span><br><span class="line">            Session session=Session.getInstance(prop);</span><br><span class="line">            <span class="comment">//开启session的调试模式，可以查看当前邮件发送状态</span></span><br><span class="line">            session.setDebug(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//通过session获取Transport对象（发送邮件的核心API）</span></span><br><span class="line">            Transport ts=session.getTransport();</span><br><span class="line">            <span class="comment">//通过邮件用户名密码链接</span></span><br><span class="line">            ts.connect(sender, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//发送者姓名&amp;邮件内容</span></span><br><span class="line">            String name = <span class="string">"发送者姓名"</span>;</span><br><span class="line">            String content = <span class="string">"邮件内容(可写HTML)"</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//创建邮件</span></span><br><span class="line">            Message msg=createSimpleMail(session,sender,addressee,name,content);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//发送电子邮件</span></span><br><span class="line">            ts.sendMessage(msg, msg.getAllRecipients());</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MimeMessage <span class="title">createSimpleMail</span><span class="params">(Session session,String sender,String addressee,String name,String content)</span> <span class="keyword">throws</span> MessagingException</span>&#123;</span><br><span class="line">        <span class="comment">//创建邮件对象</span></span><br><span class="line">        MimeMessage mm=<span class="keyword">new</span> MimeMessage(session);</span><br><span class="line">        <span class="comment">//设置发件人</span></span><br><span class="line">        mm.setFrom(<span class="keyword">new</span> InternetAddress(sender));</span><br><span class="line">        <span class="comment">//设置收件人</span></span><br><span class="line">        mm.setRecipient(Message.RecipientType.TO, <span class="keyword">new</span> InternetAddress(addressee));</span><br><span class="line">        <span class="comment">//设置抄送人</span></span><br><span class="line"><span class="comment">//        mm.setRecipient(Message.RecipientType.CC, new InternetAddress(""));</span></span><br><span class="line">        mm.setSubject(name);</span><br><span class="line">        mm.setContent(content, <span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Mail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>七牛云上传文件</title>
      <link href="/2019/04/11/%E4%B8%83%E7%89%9B%E4%BA%91%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6/"/>
      <url>/2019/04/11/%E4%B8%83%E7%89%9B%E4%BA%91%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 上传文件 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;commons-io&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;commons-io&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.6&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--七牛云上传文件--&gt;</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.qiniu&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;qiniu-java-sdk&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;7.2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="七牛云上传文件类"><a href="#七牛云上传文件类" class="headerlink" title="七牛云上传文件类"></a>七牛云上传文件类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.jeys.common.intermediateTable.QingQiu;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.common.QiniuException;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.common.Zone;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.http.Response;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.BucketManager;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.Configuration;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.UploadManager;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.model.DefaultPutRet;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.model.FileInfo;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.util.Auth;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 七牛云上传文件的类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/30 15:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String accessKey = <span class="string">"七牛云AK"</span>;<span class="comment">//ak值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String secretKey = <span class="string">"七牛云SK"</span>;<span class="comment">//sk值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String bucket = <span class="string">"七牛云储存空间名称"</span>;<span class="comment">//存储空间值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//构造一个带指定Zone对象的配置类(这是华东地区)</span></span><br><span class="line">            Configuration cfg = <span class="keyword">new</span> Configuration(Zone.zone0());</span><br><span class="line">            <span class="comment">//...其他参数参考类注释</span></span><br><span class="line">            UploadManager uploadManager = <span class="keyword">new</span> UploadManager(cfg);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 默认不指定key的情况下，以文件内容的hash值作为文件名</span></span><br><span class="line"><span class="comment">             * 传入key的话，如果和已上传文件的名称相同则会覆盖原有的文件</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            String filePath = <span class="string">"要上传的文件路径"</span>;</span><br><span class="line">            String key = <span class="string">"七牛云保存的key值(文件名称)"</span>;</span><br><span class="line">            Auth auth = Auth.create(accessKey, secretKey);</span><br><span class="line">            String upToken = auth.uploadToken(bucket);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//只要不报错就上传成功图片了</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Response res = uploadManager.put(filePath, key, upToken);</span><br><span class="line">                <span class="comment">//解析上传成功的结果</span></span><br><span class="line">                DefaultPutRet putRet = <span class="keyword">new</span> Gson().fromJson(res.bodyString(), DefaultPutRet.class);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (QiniuException ex) &#123;</span><br><span class="line">                Response r = ex.response;</span><br><span class="line">                System.err.println(r.toString());</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.err.println(r.bodyString());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (QiniuException ex2) &#123;</span><br><span class="line">                    <span class="comment">//ignore</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取bucket里面所有文件的信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bucketNm</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;QingQiu&gt; <span class="title">getFileInfo</span><span class="params">(String bucketNm)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            BucketManager bucketManager = getBucketManager();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//文件名前缀</span></span><br><span class="line">            String prefix = <span class="string">""</span>;</span><br><span class="line">            <span class="comment">//每次迭代的长度限制，最大1000，推荐值 1000</span></span><br><span class="line">            <span class="keyword">int</span> limit = <span class="number">1000</span>;</span><br><span class="line">            <span class="comment">//指定目录分隔符，列出所有公共前缀（模拟列出目录效果）。缺省值为空字符串</span></span><br><span class="line">            String delimiter = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//列举空间文件列表</span></span><br><span class="line">            BucketManager.FileListIterator fileListIterator = bucketManager.createFileListIterator(bucketNm, prefix, limit, delimiter);</span><br><span class="line">            ArrayList&lt;QingQiu&gt; qingQius = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span> (fileListIterator.hasNext()) &#123;</span><br><span class="line">                <span class="comment">//处理获取的file list结果</span></span><br><span class="line">                FileInfo[] items = fileListIterator.next();</span><br><span class="line">                <span class="keyword">for</span> (FileInfo item : items) &#123;</span><br><span class="line">                    String mimeType = item.mimeType;</span><br><span class="line">                    <span class="keyword">if</span>(mimeType.contains(<span class="string">"image"</span>))&#123;</span><br><span class="line">                        QingQiu qingQiu = <span class="keyword">new</span> QingQiu();</span><br><span class="line"></span><br><span class="line">                        qingQiu.setKey(item.key);</span><br><span class="line">                        qingQiu.setHash(item.hash);</span><br><span class="line">                        qingQiu.setFsize(item.fsize);</span><br><span class="line">                        qingQiu.setMimeType(item.mimeType);</span><br><span class="line">                        qingQiu.setPutTime(item.putTime);</span><br><span class="line">                        qingQiu.setEndUser(item.endUser);</span><br><span class="line"></span><br><span class="line">                        qingQius.add(qingQiu);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> qingQius;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key值删除文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ImgKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delFiles</span><span class="params">(String ImgKey)</span></span>&#123;</span><br><span class="line">        Auth auth = Auth.create(accessKey, secretKey);</span><br><span class="line">        Configuration config = <span class="keyword">new</span> Configuration(Zone.zone0());</span><br><span class="line">        BucketManager bucketMgr = <span class="keyword">new</span> BucketManager(auth, config);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bucketMgr.delete(bucket, ImgKey);<span class="comment">//当前为7.2.1；  7.2.2后才能传多个key ，即：第二个参数为数组 (String... deleteTargets)</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (QiniuException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取Bucket的管理对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BucketManager <span class="title">getBucketManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//构造一个带指定Zone对象的配置类</span></span><br><span class="line">        <span class="comment">//区域要和自己的bucket对上，不然就上传不成功</span></span><br><span class="line">        <span class="comment">//华东    Zone.zone0()</span></span><br><span class="line">        <span class="comment">//华北    Zone.zone1()</span></span><br><span class="line">        <span class="comment">//华南    Zone.zone2()</span></span><br><span class="line">        <span class="comment">//北美    Zone.zoneNa0()</span></span><br><span class="line">        Configuration cfg = <span class="keyword">new</span> Configuration(Zone.zone0());</span><br><span class="line">        Auth auth = Auth.create(accessKey, secretKey);</span><br><span class="line">        BucketManager bucketManager = <span class="keyword">new</span> BucketManager(auth, cfg);</span><br><span class="line">        <span class="keyword">return</span> bucketManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="七牛云返回参数封装类"><a href="#七牛云返回参数封装类" class="headerlink" title="七牛云返回参数封装类"></a>七牛云返回参数封装类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 七牛云返回参数封装</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/8 14:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QingQiu</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String key;<span class="comment">//资源名</span></span><br><span class="line">    String hash;<span class="comment">//七牛云文件的HASH值</span></span><br><span class="line">    <span class="keyword">long</span> fsize;<span class="comment">//资源内容的大小，单位：字节。</span></span><br><span class="line">    String mimeType;<span class="comment">//文件类型</span></span><br><span class="line">    <span class="keyword">long</span> putTime;<span class="comment">//上传时间，单位：100纳秒，其值去掉低七位即为Unix时间戳。</span></span><br><span class="line">    String endUser;<span class="comment">//资源内容的唯一属主标识(公共空间为null)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QingQiu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QingQiu</span><span class="params">(String key, String hash, <span class="keyword">long</span> fsize, String mimeType, <span class="keyword">long</span> putTime, String endUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.hash = hash;</span><br><span class="line">        <span class="keyword">this</span>.fsize = fsize;</span><br><span class="line">        <span class="keyword">this</span>.mimeType = mimeType;</span><br><span class="line">        <span class="keyword">this</span>.putTime = putTime;</span><br><span class="line">        <span class="keyword">this</span>.endUser = endUser;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hash;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHash</span><span class="params">(String hash)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hash = hash;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getFsize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fsize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFsize</span><span class="params">(<span class="keyword">long</span> fsize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fsize = fsize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMimeType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mimeType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMimeType</span><span class="params">(String mimeType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mimeType = mimeType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getPutTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> putTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPutTime</span><span class="params">(<span class="keyword">long</span> putTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.putTime = putTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEndUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> endUser;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEndUser</span><span class="params">(String endUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.endUser = endUser;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> QingQiu)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        QingQiu qingQiu = (QingQiu) o;</span><br><span class="line">        <span class="keyword">return</span> fsize == qingQiu.fsize &amp;&amp;</span><br><span class="line">                putTime == qingQiu.putTime &amp;&amp;</span><br><span class="line">                Objects.equals(key, qingQiu.key) &amp;&amp;</span><br><span class="line">                Objects.equals(hash, qingQiu.hash) &amp;&amp;</span><br><span class="line">                Objects.equals(mimeType, qingQiu.mimeType) &amp;&amp;</span><br><span class="line">                Objects.equals(endUser, qingQiu.endUser);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Objects.hash(key, hash, fsize, mimeType, putTime, endUser);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"QingQiu&#123;"</span> +</span><br><span class="line">                <span class="string">"key='"</span> + key + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", hash='"</span> + hash + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", fsize="</span> + fsize +</span><br><span class="line">                <span class="string">", mimeType='"</span> + mimeType + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", putTime="</span> + putTime +</span><br><span class="line">                <span class="string">", endUser='"</span> + endUser + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> 七牛云 </tag>
            
            <tag> 上传文件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiro获取在线用户</title>
      <link href="/2019/04/11/shiro%E8%8E%B7%E5%8F%96%E5%9C%A8%E7%BA%BF%E7%94%A8%E6%88%B7/"/>
      <url>/2019/04/11/shiro%E8%8E%B7%E5%8F%96%E5%9C%A8%E7%BA%BF%E7%94%A8%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<p>需要先配置shiro,因为这是通过shiro操作的</p><p>shiro配置文件配置SessionDAO</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * sessionDAO(可以拿到session中的信息)</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> SessionDAO <span class="title">sessionDAO</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> EnterpriseCacheSessionDAO();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- shiro权限控制框架 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.2&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="shiro获取在线用户"><a href="#shiro获取在线用户" class="headerlink" title="shiro获取在线用户"></a>shiro获取在线用户</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.jeys.system.user.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.mgt.eis.SessionDAO;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.SimplePrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.support.DefaultSubjectContext;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 根据shiros中的session获取在线用户</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/6 21:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionServiceImpl</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(SessionServiceImpl.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SessionDAO sessionDAO;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SessionServiceImpl</span><span class="params">(SessionDAO sessionDAO)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sessionDAO = sessionDAO;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取session中所有的在线用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">onlineUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        User User;</span><br><span class="line">        Collection&lt;Session&gt; sessions = sessionDAO.getActiveSessions();</span><br><span class="line">        <span class="keyword">for</span> (Session session : sessions) &#123;</span><br><span class="line">            SimplePrincipalCollection principalCollection = <span class="keyword">new</span> SimplePrincipalCollection();</span><br><span class="line">            <span class="keyword">if</span> (session.getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                principalCollection = (SimplePrincipalCollection) session</span><br><span class="line">                        .getAttribute(DefaultSubjectContext.PRINCIPALS_SESSION_KEY);</span><br><span class="line">                User = (User) principalCollection.getPrimaryPrincipal();</span><br><span class="line">                list.add(User);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取所有session</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Session&gt; <span class="title">sessionList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sessionDAO.getActiveSessions();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 管理员强制踢出用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sessionId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionUserLogout</span><span class="params">(String[] sessionIds, String sessionId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(sessionIds != <span class="keyword">null</span>)&#123;</span><br><span class="line">            logger.info(<span class="string">"开始批量踢出用户"</span>);</span><br><span class="line">            logger.info(<span class="string">"踢出的用户id为："</span> + sessionIds);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (String id : sessionIds) &#123;</span><br><span class="line">                Session session = sessionDAO.readSession(id);</span><br><span class="line">                session.setTimeout(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"开始踢出用户"</span>);</span><br><span class="line">        logger.info(<span class="string">"踢出的用户id为："</span> + sessionId);</span><br><span class="line"></span><br><span class="line">        Session session = sessionDAO.readSession(sessionId);</span><br><span class="line">        session.setTimeout(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">"踢出用户结束"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="user类"><a href="#user类" class="headerlink" title="user类"></a>user类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jeys.system.user.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Basic;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Column;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/20 11:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> userId;</span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Long sex;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line">    <span class="keyword">private</span> Long status;</span><br><span class="line">    <span class="keyword">private</span> Timestamp creatTime;</span><br><span class="line">    <span class="keyword">private</span> Timestamp modifiedTime;</span><br><span class="line">    <span class="keyword">private</span> Timestamp birthday;</span><br><span class="line">    <span class="keyword">private</span> String liveCoutry;</span><br><span class="line">    <span class="keyword">private</span> String liveProvince;</span><br><span class="line">    <span class="keyword">private</span> String liveCity;</span><br><span class="line">    <span class="keyword">private</span> String liveDistrict;</span><br><span class="line">    <span class="keyword">private</span> Long deptId;</span><br><span class="line">    <span class="keyword">private</span> Long picId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"user_id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getUserId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserId</span><span class="params">(<span class="keyword">long</span> userId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"nickname"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNickname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nickname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNickname</span><span class="params">(String nickname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nickname = nickname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"username"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"password"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"sex"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(Long sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"email"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"mobile"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMobile</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMobile</span><span class="params">(String mobile)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"status"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStatus</span><span class="params">(Long status)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"creat_time"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getCreatTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> creatTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCreatTime</span><span class="params">(Timestamp creatTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.creatTime = creatTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"modified_time"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getModifiedTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> modifiedTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setModifiedTime</span><span class="params">(Timestamp modifiedTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.modifiedTime = modifiedTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"birthday"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Timestamp <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Timestamp birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_coutry"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveCoutry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveCoutry;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveCoutry</span><span class="params">(String liveCoutry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveCoutry = liveCoutry;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_province"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveProvince</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveProvince;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveProvince</span><span class="params">(String liveProvince)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveProvince = liveProvince;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_city"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveCity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveCity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveCity</span><span class="params">(String liveCity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveCity = liveCity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"live_district"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLiveDistrict</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> liveDistrict;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLiveDistrict</span><span class="params">(String liveDistrict)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.liveDistrict = liveDistrict;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"dept_id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getDeptId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> deptId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDeptId</span><span class="params">(Long deptId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.deptId = deptId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"pic_id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getPicId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> picId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPicId</span><span class="params">(Long picId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.picId = picId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        User user = (User) o;</span><br><span class="line">        <span class="keyword">return</span> userId == user.userId &amp;&amp;</span><br><span class="line">                Objects.equals(nickname, user.nickname) &amp;&amp;</span><br><span class="line">                Objects.equals(username, user.username) &amp;&amp;</span><br><span class="line">                Objects.equals(password, user.password) &amp;&amp;</span><br><span class="line">                Objects.equals(sex, user.sex) &amp;&amp;</span><br><span class="line">                Objects.equals(email, user.email) &amp;&amp;</span><br><span class="line">                Objects.equals(mobile, user.mobile) &amp;&amp;</span><br><span class="line">                Objects.equals(status, user.status) &amp;&amp;</span><br><span class="line">                Objects.equals(creatTime, user.creatTime) &amp;&amp;</span><br><span class="line">                Objects.equals(modifiedTime, user.modifiedTime) &amp;&amp;</span><br><span class="line">                Objects.equals(birthday, user.birthday) &amp;&amp;</span><br><span class="line">                Objects.equals(liveCoutry, user.liveCoutry) &amp;&amp;</span><br><span class="line">                Objects.equals(liveProvince, user.liveProvince) &amp;&amp;</span><br><span class="line">                Objects.equals(liveCity, user.liveCity) &amp;&amp;</span><br><span class="line">                Objects.equals(liveDistrict, user.liveDistrict) &amp;&amp;</span><br><span class="line">                Objects.equals(deptId, user.deptId) &amp;&amp;</span><br><span class="line">                Objects.equals(picId, user.picId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Objects.hash(userId, nickname, username, password, sex, email, mobile, status, creatTime, modifiedTime, birthday, liveCoutry, liveProvince, liveCity, liveDistrict, deptId, picId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> session </tag>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring手动获取bean</title>
      <link href="/2019/04/11/Spring%E6%89%8B%E5%8A%A8%E8%8E%B7%E5%8F%96bean/"/>
      <url>/2019/04/11/Spring%E6%89%8B%E5%8A%A8%E8%8E%B7%E5%8F%96bean/</url>
      
        <content type="html"><![CDATA[<h2 id="Spring手动获取bean"><a href="#Spring手动获取bean" class="headerlink" title="Spring手动获取bean"></a>Spring手动获取bean</h2><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextAware;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 手动获取bean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/3/13 16:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringUtil</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContextParam)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        applicationContext=applicationContextParam;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getObject</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        Object object = <span class="keyword">null</span>;</span><br><span class="line">        object = applicationContext.getBean(id);</span><br><span class="line">        <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getObject</span><span class="params">(Class&lt;T&gt; tClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> applicationContext.getBean(tClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String tClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> applicationContext.getBean(tClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(Class&lt;T&gt; tClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> applicationContext.getBean(tClass);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot自带Scheduled定时任务</title>
      <link href="/2019/04/11/SpringBoot%E8%87%AA%E5%B8%A6Scheduled%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2019/04/11/SpringBoot%E8%87%AA%E5%B8%A6Scheduled%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringBoot自带Scheduled定时任务"><a href="#SpringBoot自带Scheduled定时任务" class="headerlink" title="SpringBoot自带Scheduled定时任务"></a>SpringBoot自带Scheduled定时任务</h2><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Scheduled定时任务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/4/21 20:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzTask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每天凌晨一点执行任务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled</span>(cron = <span class="string">"0 0 1 * * ?"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dayTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">         <span class="comment">//在这里写要执行的定时任务逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每个星期一凌晨两点执行任务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled</span>(cron = <span class="string">"0 0 2 ? * MON"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WeekTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//在这里写要执行的定时任务逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每五秒执行任务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled</span>(fixedDelay = <span class="number">5000</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">secondTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//在这里写要执行的定时任务逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><p>@Scheduled(cron = “可以随意填写cron”)</p><p>推荐一个在线Cron表达式生成器:<a href="http://cron.qqe2.com/" target="_blank" rel="noopener">Cron表达式生成器</a></p><p>@Scheduled(fixedDelay = 毫秒值)</p><h2 id="Cron释义"><a href="#Cron释义" class="headerlink" title="Cron释义"></a>Cron释义</h2><p>转自百度百科:<a href="https://baike.baidu.com/item/cron/10952601?fr=aladdin#3" target="_blank" rel="noopener">cron</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Cron表达式是一个字符串，字符串以5或6个空格隔开，分为6或7个域，每一个域代表一个含义，Cron有如下两种语法格式：</span><br><span class="line">Seconds Minutes Hours DayofMonth Month DayofWeek Year或</span><br><span class="line">Seconds Minutes Hours DayofMonth Month DayofWeek</span><br><span class="line">每一个域可出现的字符如下：</span><br><span class="line">Seconds:可出现&quot;, - * /&quot;四个字符，有效范围为0-59的整数</span><br><span class="line">Minutes:可出现&quot;, - * /&quot;四个字符，有效范围为0-59的整数</span><br><span class="line">Hours:可出现&quot;, - * /&quot;四个字符，有效范围为0-23的整数</span><br><span class="line">DayofMonth:可出现&quot;, - * / ? L W C&quot;八个字符，有效范围为0-31的整数</span><br><span class="line">Month:可出现&quot;, - * /&quot;四个字符，有效范围为1-12的整数或JAN-DEc</span><br><span class="line">DayofWeek:可出现&quot;, - * / ? L C #&quot;八个字符，有效范围为1-7的整数或SUN-SAT两个范围。1表示星期天，2表示星期一， 依次类推</span><br><span class="line">Year:可出现&quot;, - * /&quot;四个字符，有效范围为1970-2099年</span><br><span class="line">每一个域都使用数字，但还可以出现如下特殊字符，它们的含义是：</span><br><span class="line">(1)*：表示匹配该域的任意值，假如在Minutes域使用*, 即表示每分钟都会触发事件。</span><br><span class="line">(2)?:只能用在DayofMonth和DayofWeek两个域。它也匹配域的任意值，但实际不会。因为DayofMonth和DayofWeek会相互影响。例如想在每月的20日触发调度，不管20日到底是星期几，则只能使用如下写法： 13 13 15 20 * ?, 其中最后一位只能用？，而不能使用*，如果使用*表示不管星期几都会触发，实际上并不是这样。</span><br><span class="line">(3)-:表示范围，例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次</span><br><span class="line">(4)/：表示起始时间开始触发，然后每隔固定时间触发一次，例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次.</span><br><span class="line">(5),:表示列出枚举值值。例如：在Minutes域使用5,20，则意味着在第5和第20分钟分别触发一次。</span><br><span class="line">(6)L:表示最后，只能出现在DayofWeek和DayofMonth域，如果在DayofWeek域使用5L,意味着在最后的一个星期四触发。</span><br><span class="line">(7)W:表示有效工作日(周一到周五),只能出现在DayofMonth域，系统将在离指定日期的最近的有效工作日触发事件。例如：在 DayofMonth使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份</span><br><span class="line">(8)LW:这两个字符可以连用，表示在某个月最后一个工作日，即最后一个非周六周末的日期。</span><br><span class="line">(9)#:用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三。</span><br><span class="line">举几个例子:</span><br><span class="line">0 0 2 1 * ? * 表示在每月的1日的凌晨2点调度任务</span><br><span class="line">0 15 10 ? * MON-FRI 表示周一到周五每天上午10：15执行作业</span><br><span class="line">0 15 10 ? * 6L 2002-2006 表示2002-2006年的每个月的最后一个星期五上午10:15执行作</span><br><span class="line">0 0 10,14,16 * * ? 每天上午10点，下午2点，4点</span><br><span class="line">0 0/30 9-17 * * ? 朝九晚五工作时间内每半小时</span><br><span class="line">0 0 12 ? * WED 表示每个星期三中午12点</span><br><span class="line">&quot;0 0 12 * * ?&quot; 每天中午12点触发</span><br><span class="line">&quot;0 15 10 ? * *&quot; 每天上午10:15触发</span><br><span class="line">&quot;0 15 10 * * ?&quot; 每天上午10:15触发</span><br><span class="line">&quot;0 15 10 * * ? *&quot; 每天上午10:15触发</span><br><span class="line">&quot;0 15 10 * * ? 2005&quot; 2005年的每天上午10:15触发</span><br><span class="line">&quot;0 * 14 * * ?&quot; 在每天下午2点到下午2:59期间的每1分钟触发</span><br><span class="line">&quot;0 0/5 14 * * ?&quot; 在每天下午2点到下午2:55期间的每5分钟触发</span><br><span class="line">&quot;0 0/5 14,18 * * ?&quot; 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发</span><br><span class="line">&quot;0 0-5 14 * * ?&quot; 在每天下午2点到下午2:05期间的每1分钟触发</span><br><span class="line">&quot;0 10,44 14 ? 3 WED&quot; 每年三月的星期三的下午2:10和2:44触发</span><br><span class="line">&quot;0 15 10 ? * MON-FRI&quot; 周一至周五的上午10:15触发</span><br><span class="line">&quot;0 15 10 15 * ?&quot; 每月15日上午10:15触发</span><br><span class="line">&quot;0 15 10 L * ?&quot; 每月最后一日的上午10:15触发</span><br><span class="line">&quot;0 15 10 ? * 6L&quot; 每月的最后一个星期五上午10:15触发</span><br><span class="line">&quot;0 15 10 ? * 6L 2002-2005&quot; 2002年至2005年的每月的最后一个星期五上午10:15触发</span><br><span class="line">&quot;0 15 10 ? * 6#3&quot; 每月的第三个星期五上午10:15触发</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Springboot </tag>
            
            <tag> 定时任务 </tag>
            
            <tag> Scheduled </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiro封装方法</title>
      <link href="/2019/04/11/Shiro%E5%B0%81%E8%A3%85%E6%96%B9%E6%B3%95/"/>
      <url>/2019/04/11/Shiro%E5%B0%81%E8%A3%85%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- shiro权限控制框架 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.2&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="封装shiro一些方法的类"><a href="#封装shiro一些方法的类" class="headerlink" title="封装shiro一些方法的类"></a>封装shiro一些方法的类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.jeys.system.user.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.mgt.eis.SessionDAO;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.security.Principal;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 封装shiro一些方法的类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/6 21:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SessionDAO sessionDAO;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取Subject</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Subject <span class="title">getSubjct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SecurityUtils.getSubject();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取User</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Object object = getSubjct().getPrincipal();</span><br><span class="line">        <span class="keyword">return</span> (User)object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取UserId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title">getUserId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getUser().getUserId();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 退出当前用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">logout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        getSubjct().logout();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 退出所有在线用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Principal&gt; <span class="title">getPrinciples</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Principal&gt; principals = <span class="keyword">null</span>;</span><br><span class="line">        Collection&lt;Session&gt; sessions = sessionDAO.getActiveSessions();</span><br><span class="line">        <span class="keyword">return</span> principals;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis服务类用于操作Redis</title>
      <link href="/2019/04/11/Redis%E6%9C%8D%E5%8A%A1%E7%B1%BB%E7%94%A8%E4%BA%8E%E6%93%8D%E4%BD%9CRedis/"/>
      <url>/2019/04/11/Redis%E6%9C%8D%E5%8A%A1%E7%B1%BB%E7%94%A8%E4%BA%8E%E6%93%8D%E4%BD%9CRedis/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Redis--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Redis服务类"><a href="#Redis服务类" class="headerlink" title="Redis服务类"></a>Redis服务类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Redis服务类(用来操作redis)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/24 11:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisUtil</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 写入缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(<span class="keyword">final</span> String key, Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ValueOperations&lt;Serializable, Object&gt; operations = redisTemplate.opsForValue();</span><br><span class="line">            operations.set(key, value);</span><br><span class="line">            result = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 写入缓存设置时效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(<span class="keyword">final</span> String key, Object value, Long expireTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ValueOperations&lt;Serializable, Object&gt; operations = redisTemplate.opsForValue();</span><br><span class="line">            operations.set(key, value);</span><br><span class="line">            redisTemplate.expire(key, expireTime, TimeUnit.SECONDS);</span><br><span class="line">            result = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除对应的value</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keys</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">final</span> String... keys)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            remove(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量删除key</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pattern</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removePattern</span><span class="params">(<span class="keyword">final</span> String pattern)</span> </span>&#123;</span><br><span class="line">        Set&lt;Serializable&gt; keys = redisTemplate.keys(pattern);</span><br><span class="line">        <span class="keyword">if</span> (keys.size() &gt; <span class="number">0</span>)</span><br><span class="line">            redisTemplate.delete(keys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除对应的value</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">final</span> String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (exists(key)) &#123;</span><br><span class="line">            redisTemplate.delete(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断缓存中是否有对应的value</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exists</span><span class="params">(<span class="keyword">final</span> String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(<span class="keyword">final</span> String key)</span> </span>&#123;</span><br><span class="line">        ValueOperations&lt;Serializable, Object&gt; operations = redisTemplate.opsForValue();</span><br><span class="line">        <span class="keyword">return</span> operations.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 哈希 添加</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hashKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hmSet</span><span class="params">(String key, Object hashKey, Object value)</span> </span>&#123;</span><br><span class="line">        HashOperations&lt;String, Object, Object&gt; hash = redisTemplate.opsForHash();</span><br><span class="line">        hash.put(key, hashKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 哈希获取数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hashKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">hmGet</span><span class="params">(String key, Object hashKey)</span> </span>&#123;</span><br><span class="line">        HashOperations&lt;String, Object, Object&gt; hash = redisTemplate.opsForHash();</span><br><span class="line">        <span class="keyword">return</span> hash.get(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 列表添加</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> k</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> v</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lPush</span><span class="params">(String k, Object v)</span> </span>&#123;</span><br><span class="line">        ListOperations&lt;String, Object&gt; list = redisTemplate.opsForList();</span><br><span class="line">        list.rightPush(k, v);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 列表获取</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> k</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> l</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> l1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Object&gt; <span class="title">lRange</span><span class="params">(String k, <span class="keyword">long</span> l, <span class="keyword">long</span> l1)</span> </span>&#123;</span><br><span class="line">        ListOperations&lt;String, Object&gt; list = redisTemplate.opsForList();</span><br><span class="line">        <span class="keyword">return</span> list.range(k, l, l1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 集合添加</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        SetOperations&lt;String, Object&gt; set = redisTemplate.opsForSet();</span><br><span class="line">        set.add(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 集合获取</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Object&gt; <span class="title">setMembers</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        SetOperations&lt;String, Object&gt; set = redisTemplate.opsForSet();</span><br><span class="line">        <span class="keyword">return</span> set.members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有序集合添加</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> scoure</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">zAdd</span><span class="params">(String key, Object value, <span class="keyword">double</span> scoure)</span> </span>&#123;</span><br><span class="line">        ZSetOperations&lt;String, Object&gt; zset = redisTemplate.opsForZSet();</span><br><span class="line">        zset.add(key, value, scoure);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有序集合获取</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> scoure</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> scoure1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Object&gt; <span class="title">rangeByScore</span><span class="params">(String key, <span class="keyword">double</span> scoure, <span class="keyword">double</span> scoure1)</span> </span>&#123;</span><br><span class="line">        ZSetOperations&lt;String, Object&gt; zset = redisTemplate.opsForZSet();</span><br><span class="line">        <span class="keyword">return</span> zset.rangeByScore(key, scoure, scoure1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Idea用Hibernate生成实体类</title>
      <link href="/2019/04/11/Idea%E7%94%A8Hibernate%E7%94%9F%E6%88%90%E5%AE%9E%E4%BD%93%E7%B1%BB/"/>
      <url>/2019/04/11/Idea%E7%94%A8Hibernate%E7%94%9F%E6%88%90%E5%AE%9E%E4%BD%93%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<p>在resources目录下添加hibernate.cfg.xml文件</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/de4d96c9b129a7f5.png" alt></p><a id="more"></a><p>hibernate.cfg.xml代码</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">'1.0'</span> encoding=<span class="string">'utf-8'</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class="line">    <span class="string">"-//Hibernate/Hibernate Configuration DTD//EN"</span></span><br><span class="line">    <span class="string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span><br><span class="line">&lt;hibernate-configuration&gt;</span><br><span class="line">  &lt;session-factory&gt;</span><br><span class="line">    &lt;!--数据库连接url配置--&gt;</span><br><span class="line">    &lt;property name=<span class="string">"connection.url"</span>&gt;jdbc:mysql:<span class="comment">//数据库IP:数据库端口号/数据库名称&lt;/property&gt;</span></span><br><span class="line">    &lt;!--数据库驱动配置--&gt;</span><br><span class="line">    &lt;property name="connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">  &lt;/session-factory&gt;</span><br><span class="line">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure><p>打开Persistence(注:若resources目录下无hibernate.cfg.xml文件，此窗口不可打开)</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/8cde85c634f37c43.png" alt></p><p>选择数据库，生成实体类所在路径，需要生成的实体类,点击ok即可生成</p><p>注:选择的数据库是由idea自带的数据库连接软件中选择的</p><p>创建详情:<a href="http://106.13.51.1:8200/index.php/2019/05/11/idea%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/" target="_blank" rel="noopener">Idea连接数据库</a></p><p><img src="http://106.13.51.1:8100/imgs/2019/05/089fb82e779b8cb0.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hibernate </tag>
            
            <tag> Idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Idea连接数据库</title>
      <link href="/2019/04/11/Idea%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2019/04/11/Idea%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>打开Database窗口点击MySQL</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/9dc19a51a2b88761.png" alt></p><a id="more"></a><p>如果没有Database窗口，那么通过view窗口打开，如下图所示</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/bcb9c07f515d3f99.png" alt></p><p>填写相关信息，填写完毕后，可点击Test Connection按钮测试是否可以连接</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/effeba4e1862c868.png" alt></p><p>测试通过即可连接数据库如图所示</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/e8d1bba795e9fa46.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Idea </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown文本编辑器editor.md</title>
      <link href="/2019/04/11/MarkDown%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8editor.md%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/04/11/MarkDown%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8editor.md%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="MarkDown文本编辑器editor-md基础使用"><a href="#MarkDown文本编辑器editor-md基础使用" class="headerlink" title="MarkDown文本编辑器editor.md基础使用"></a>MarkDown文本编辑器editor.md基础使用</h2><h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><p><a href="https://pandao.github.io/editor.md/examples/" target="_blank" rel="noopener">Editor.md</a></p><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--编辑器位置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test-editormd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"editormd-markdown-textarea"</span> <span class="attr">name</span>=<span class="string">"test-editormd-markdown-doc"</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注:</p><p>id=”test-editormd”为editor.md的显示区域id，id=”content”为MarkDown语法内容(回显MarkDown可在该元素中放置) </p><a id="more"></a><h2 id="Js"><a href="#Js" class="headerlink" title="Js"></a>Js</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载markdown</span></span><br><span class="line">$(function() &#123;</span><br><span class="line">    testEditor = editormd(<span class="string">"test-editormd"</span>, &#123;</span><br><span class="line">        placeholder : <span class="string">"此处开始编写您要发布的内容..."</span>,<span class="comment">//初始化文字</span></span><br><span class="line">        width   : <span class="string">"95%"</span>,</span><br><span class="line">        height  : <span class="number">640</span>,</span><br><span class="line">        codeFold : <span class="keyword">true</span>,</span><br><span class="line">        tocm: <span class="keyword">true</span>,<span class="comment">//开启顶部目录功能</span></span><br><span class="line">        imageUpload: <span class="keyword">false</span>,<span class="comment">//图片上传功能</span></span><br><span class="line">        imageFormats : [<span class="string">"jpg"</span>, <span class="string">"jpeg"</span>, <span class="string">"gif"</span>, <span class="string">"png"</span>, <span class="string">"bmp"</span>, <span class="string">"webp"</span>],<span class="comment">//可上传图片类型</span></span><br><span class="line">        imageUploadURL : <span class="string">"../article/uploadImage"</span>,<span class="comment">//图片上传路径</span></span><br><span class="line">        syncScrolling : <span class="string">"single"</span>,</span><br><span class="line">        tex: <span class="keyword">true</span>,                   <span class="comment">// 开启科学公式TeX语言支持，默认关闭</span></span><br><span class="line">        flowChart: <span class="keyword">true</span>,             <span class="comment">// 开启流程图支持，默认关闭</span></span><br><span class="line">        sequenceDiagram: <span class="keyword">true</span>,       <span class="comment">// 开启时序/序列图支持，默认关闭,</span></span><br><span class="line">        emoji: <span class="keyword">false</span>,<span class="comment">//表情功能</span></span><br><span class="line">        path    : <span class="string">"/js/editor/lib/"</span><span class="comment">//系统包(editor的lib包)</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Editor.md </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用clipboard.min.js完成文本复制到粘贴板</title>
      <link href="/2019/04/11/%E4%BD%BF%E7%94%A8clipboard.min.js%E5%AE%8C%E6%88%90%E6%96%87%E6%9C%AC%E5%A4%8D%E5%88%B6%E5%88%B0%E7%B2%98%E8%B4%B4%E6%9D%BF/"/>
      <url>/2019/04/11/%E4%BD%BF%E7%94%A8clipboard.min.js%E5%AE%8C%E6%88%90%E6%96%87%E6%9C%AC%E5%A4%8D%E5%88%B6%E5%88%B0%E7%B2%98%E8%B4%B4%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h2 id="使用clipboard-min-js完成文本复制到粘贴板"><a href="#使用clipboard-min-js完成文本复制到粘贴板" class="headerlink" title="使用clipboard.min.js完成文本复制到粘贴板"></a>使用clipboard.min.js完成文本复制到粘贴板</h2><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">data-clipboard-text</span>=<span class="string">"这里是要被复制的text文本"</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">name</span>=<span class="string">"copy"</span>&gt;</span>复制文本到粘贴板<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Js"><a href="#Js" class="headerlink" title="Js"></a>Js</h2><p>注:文本得放在属性data-clipboard-text中</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 用ClipboardJS实现文本复制功能</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      $(<span class="string">"button[name='copy']"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">          <span class="comment">//被复制的文本</span></span><br><span class="line">          <span class="keyword">var</span> text = obj.toElement.value;</span><br><span class="line">          <span class="comment">//var clipboard = new ClipboardJS('可以获取的元素');</span></span><br><span class="line">          <span class="comment">//例如，点击class为btn的元素时，把文本text复制到粘贴板</span></span><br><span class="line">          <span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn'</span>);</span><br><span class="line"></span><br><span class="line">          clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">              <span class="built_in">console</span>.info(<span class="string">'Action:'</span>, e.action);</span><br><span class="line">              <span class="built_in">console</span>.info(<span class="string">'Text:'</span>, e.text);</span><br><span class="line">              <span class="built_in">console</span>.info(<span class="string">'Trigger:'</span>, e.trigger);</span><br><span class="line">              layer.msg(<span class="string">"复制图片链接成功"</span>);</span><br><span class="line">              e.clearSelection();</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">              <span class="built_in">console</span>.error(<span class="string">'Action:'</span>, e.action);</span><br><span class="line">              <span class="built_in">console</span>.error(<span class="string">'Trigger:'</span>, e.trigger);</span><br><span class="line">              layer.msg(<span class="string">"复制图片链接失败"</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure><h2 id="clipboard-min-js官网"><a href="#clipboard-min-js官网" class="headerlink" title="clipboard.min.js官网"></a>clipboard.min.js官网</h2><p><a href="https://clipboardjs.com/" target="_blank" rel="noopener">clipboard</a></p><h2 id="clipboard-min-js"><a href="#clipboard-min-js" class="headerlink" title="clipboard.min.js"></a>clipboard.min.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> * clipboard.js v2.0.4</span></span><br><span class="line"><span class="comment"> * https://zenorocha.github.io/clipboard.js</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Licensed MIT © Zeno Rocha</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="string">"object"</span>==<span class="keyword">typeof</span> exports&amp;&amp;<span class="string">"object"</span>==<span class="keyword">typeof</span> <span class="built_in">module</span>?<span class="built_in">module</span>.exports=e():<span class="string">"function"</span>==<span class="keyword">typeof</span> define&amp;&amp;define.amd?define([],e):<span class="string">"object"</span>==<span class="keyword">typeof</span> exports?exports.ClipboardJS=e():t.ClipboardJS=e()&#125;(<span class="keyword">this</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> o=&#123;&#125;;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">if</span>(o[t])<span class="keyword">return</span> o[t].exports;<span class="keyword">var</span> e=o[t]=&#123;<span class="attr">i</span>:t,<span class="attr">l</span>:!<span class="number">1</span>,<span class="attr">exports</span>:&#123;&#125;&#125;;<span class="keyword">return</span> n[t].call(e.exports,e,e.exports,r),e.l=!<span class="number">0</span>,e.exports&#125;<span class="keyword">return</span> r.m=n,r.c=o,r.d=<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;r.o(t,e)||<span class="built_in">Object</span>.defineProperty(t,e,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">get</span>:n&#125;)&#125;,r.r=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="string">"undefined"</span>!=<span class="keyword">typeof</span> <span class="built_in">Symbol</span>&amp;&amp;<span class="built_in">Symbol</span>.toStringTag&amp;&amp;<span class="built_in">Object</span>.defineProperty(t,<span class="built_in">Symbol</span>.toStringTag,&#123;<span class="attr">value</span>:<span class="string">"Module"</span>&#125;),<span class="built_in">Object</span>.defineProperty(t,<span class="string">"__esModule"</span>,&#123;<span class="attr">value</span>:!<span class="number">0</span>&#125;)&#125;,r.t=<span class="function"><span class="keyword">function</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">if</span>(<span class="number">1</span>&amp;t&amp;&amp;(e=r(e)),<span class="number">8</span>&amp;t)<span class="keyword">return</span> e;<span class="keyword">if</span>(<span class="number">4</span>&amp;t&amp;&amp;<span class="string">"object"</span>==<span class="keyword">typeof</span> e&amp;&amp;e&amp;&amp;e.__esModule)<span class="keyword">return</span> e;<span class="keyword">var</span> n=<span class="built_in">Object</span>.create(<span class="literal">null</span>);<span class="keyword">if</span>(r.r(n),<span class="built_in">Object</span>.defineProperty(n,<span class="string">"default"</span>,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">value</span>:e&#125;),<span class="number">2</span>&amp;t&amp;&amp;<span class="string">"string"</span>!=<span class="keyword">typeof</span> e)<span class="keyword">for</span>(<span class="keyword">var</span> o <span class="keyword">in</span> e)r.d(n,o,<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> e[t]&#125;.bind(<span class="literal">null</span>,o));<span class="keyword">return</span> n&#125;,r.n=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">var</span> e=t&amp;&amp;t.__esModule?<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> t.default&#125;:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> t&#125;;<span class="keyword">return</span> r.d(e,<span class="string">"a"</span>,e),e&#125;,r.o=<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(t,e)&#125;,r.p=<span class="string">""</span>,r(r.s=<span class="number">0</span>)&#125;([<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="string">"use strict"</span>;<span class="keyword">var</span> r=<span class="string">"function"</span>==<span class="keyword">typeof</span> <span class="built_in">Symbol</span>&amp;&amp;<span class="string">"symbol"</span>==<span class="keyword">typeof</span> <span class="built_in">Symbol</span>.iterator?<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">typeof</span> t&#125;:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> t&amp;&amp;<span class="string">"function"</span>==<span class="keyword">typeof</span> <span class="built_in">Symbol</span>&amp;&amp;t.constructor===<span class="built_in">Symbol</span>&amp;&amp;t!==<span class="built_in">Symbol</span>.prototype?<span class="string">"symbol"</span>:<span class="keyword">typeof</span> t&#125;,i=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n=<span class="number">0</span>;n&lt;e.length;n++)&#123;<span class="keyword">var</span> o=e[n];o.enumerable=o.enumerable||!<span class="number">1</span>,o.configurable=!<span class="number">0</span>,<span class="string">"value"</span><span class="keyword">in</span> o&amp;&amp;(o.writable=!<span class="number">0</span>),<span class="built_in">Object</span>.defineProperty(t,o.key,o)&#125;&#125;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">return</span> e&amp;&amp;o(t.prototype,e),n&amp;&amp;o(t,n),t&#125;&#125;(),a=o(n(<span class="number">1</span>)),c=o(n(<span class="number">3</span>)),u=o(n(<span class="number">4</span>));<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> t&amp;&amp;t.__esModule?t:&#123;<span class="attr">default</span>:t&#125;&#125;<span class="keyword">var</span> l=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">t,e</span>)</span>&#123;!<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(!(t <span class="keyword">instanceof</span> e))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Cannot call a class as a function"</span>)&#125;(<span class="keyword">this</span>,o);<span class="keyword">var</span> n=<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(!t)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">ReferenceError</span>(<span class="string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="keyword">return</span>!e||<span class="string">"object"</span>!=<span class="keyword">typeof</span> e&amp;&amp;<span class="string">"function"</span>!=<span class="keyword">typeof</span> e?t:e&#125;(<span class="keyword">this</span>,(o.__proto__||<span class="built_in">Object</span>.getPrototypeOf(o)).call(<span class="keyword">this</span>));<span class="keyword">return</span> n.resolveOptions(e),n.listenClick(t),n&#125;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(<span class="string">"function"</span>!=<span class="keyword">typeof</span> e&amp;&amp;<span class="literal">null</span>!==e)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Super expression must either be null or a function, not "</span>+<span class="keyword">typeof</span> e);t.prototype=<span class="built_in">Object</span>.create(e&amp;&amp;e.prototype,&#123;<span class="attr">constructor</span>:&#123;<span class="attr">value</span>:t,<span class="attr">enumerable</span>:!<span class="number">1</span>,<span class="attr">writable</span>:!<span class="number">0</span>,<span class="attr">configurable</span>:!<span class="number">0</span>&#125;&#125;),e&amp;&amp;(<span class="built_in">Object</span>.setPrototypeOf?<span class="built_in">Object</span>.setPrototypeOf(t,e):t.__proto__=e)&#125;(o,c.default),i(o,[&#123;<span class="attr">key</span>:<span class="string">"resolveOptions"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="number">0</span>&lt;<span class="built_in">arguments</span>.length&amp;&amp;<span class="keyword">void</span> <span class="number">0</span>!==<span class="built_in">arguments</span>[<span class="number">0</span>]?<span class="built_in">arguments</span>[<span class="number">0</span>]:&#123;&#125;;<span class="keyword">this</span>.action=<span class="string">"function"</span>==<span class="keyword">typeof</span> t.action?t.action:<span class="keyword">this</span>.defaultAction,<span class="keyword">this</span>.target=<span class="string">"function"</span>==<span class="keyword">typeof</span> t.target?t.target:<span class="keyword">this</span>.defaultTarget,<span class="keyword">this</span>.text=<span class="string">"function"</span>==<span class="keyword">typeof</span> t.text?t.text:<span class="keyword">this</span>.defaultText,<span class="keyword">this</span>.container=<span class="string">"object"</span>===r(t.container)?t.container:<span class="built_in">document</span>.body&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"listenClick"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">var</span> e=<span class="keyword">this</span>;<span class="keyword">this</span>.listener=(<span class="number">0</span>,u.default)(t,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> e.onClick(t)&#125;)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"onClick"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">var</span> e=t.delegateTarget||t.currentTarget;<span class="keyword">this</span>.clipboardAction&amp;&amp;(<span class="keyword">this</span>.clipboardAction=<span class="literal">null</span>),<span class="keyword">this</span>.clipboardAction=<span class="keyword">new</span> a.default(&#123;<span class="attr">action</span>:<span class="keyword">this</span>.action(e),<span class="attr">target</span>:<span class="keyword">this</span>.target(e),<span class="attr">text</span>:<span class="keyword">this</span>.text(e),<span class="attr">container</span>:<span class="keyword">this</span>.container,<span class="attr">trigger</span>:e,<span class="attr">emitter</span>:<span class="keyword">this</span>&#125;)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"defaultAction"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> s(<span class="string">"action"</span>,t)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"defaultTarget"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">var</span> e=s(<span class="string">"target"</span>,t);<span class="keyword">if</span>(e)<span class="keyword">return</span> <span class="built_in">document</span>.querySelector(e)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"defaultText"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> s(<span class="string">"text"</span>,t)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"destroy"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.listener.destroy(),<span class="keyword">this</span>.clipboardAction&amp;&amp;(<span class="keyword">this</span>.clipboardAction.destroy(),<span class="keyword">this</span>.clipboardAction=<span class="literal">null</span>)&#125;&#125;],[&#123;<span class="attr">key</span>:<span class="string">"isSupported"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="number">0</span>&lt;<span class="built_in">arguments</span>.length&amp;&amp;<span class="keyword">void</span> <span class="number">0</span>!==<span class="built_in">arguments</span>[<span class="number">0</span>]?<span class="built_in">arguments</span>[<span class="number">0</span>]:[<span class="string">"copy"</span>,<span class="string">"cut"</span>],e=<span class="string">"string"</span>==<span class="keyword">typeof</span> t?[t]:t,n=!!<span class="built_in">document</span>.queryCommandSupported;<span class="keyword">return</span> e.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;n=n&amp;&amp;!!<span class="built_in">document</span>.queryCommandSupported(t)&#125;),n&#125;&#125;]),o&#125;();<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">var</span> n=<span class="string">"data-clipboard-"</span>+t;<span class="keyword">if</span>(e.hasAttribute(n))<span class="keyword">return</span> e.getAttribute(n)&#125;t.exports=l&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="string">"use strict"</span>;<span class="keyword">var</span> o,r=<span class="string">"function"</span>==<span class="keyword">typeof</span> <span class="built_in">Symbol</span>&amp;&amp;<span class="string">"symbol"</span>==<span class="keyword">typeof</span> <span class="built_in">Symbol</span>.iterator?<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">typeof</span> t&#125;:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> t&amp;&amp;<span class="string">"function"</span>==<span class="keyword">typeof</span> <span class="built_in">Symbol</span>&amp;&amp;t.constructor===<span class="built_in">Symbol</span>&amp;&amp;t!==<span class="built_in">Symbol</span>.prototype?<span class="string">"symbol"</span>:<span class="keyword">typeof</span> t&#125;,i=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n=<span class="number">0</span>;n&lt;e.length;n++)&#123;<span class="keyword">var</span> o=e[n];o.enumerable=o.enumerable||!<span class="number">1</span>,o.configurable=!<span class="number">0</span>,<span class="string">"value"</span><span class="keyword">in</span> o&amp;&amp;(o.writable=!<span class="number">0</span>),<span class="built_in">Object</span>.defineProperty(t,o.key,o)&#125;&#125;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">return</span> e&amp;&amp;o(t.prototype,e),n&amp;&amp;o(t,n),t&#125;&#125;(),a=n(<span class="number">2</span>),c=(o=a)&amp;&amp;o.__esModule?o:&#123;<span class="attr">default</span>:o&#125;;<span class="keyword">var</span> u=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params">t</span>)</span>&#123;!<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(!(t <span class="keyword">instanceof</span> e))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Cannot call a class as a function"</span>)&#125;(<span class="keyword">this</span>,e),<span class="keyword">this</span>.resolveOptions(t),<span class="keyword">this</span>.initSelection()&#125;<span class="keyword">return</span> i(e,[&#123;<span class="attr">key</span>:<span class="string">"resolveOptions"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="number">0</span>&lt;<span class="built_in">arguments</span>.length&amp;&amp;<span class="keyword">void</span> <span class="number">0</span>!==<span class="built_in">arguments</span>[<span class="number">0</span>]?<span class="built_in">arguments</span>[<span class="number">0</span>]:&#123;&#125;;<span class="keyword">this</span>.action=t.action,<span class="keyword">this</span>.container=t.container,<span class="keyword">this</span>.emitter=t.emitter,<span class="keyword">this</span>.target=t.target,<span class="keyword">this</span>.text=t.text,<span class="keyword">this</span>.trigger=t.trigger,<span class="keyword">this</span>.selectedText=<span class="string">""</span>&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"initSelection"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.text?<span class="keyword">this</span>.selectFake():<span class="keyword">this</span>.target&amp;&amp;<span class="keyword">this</span>.selectTarget()&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"selectFake"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="keyword">this</span>,e=<span class="string">"rtl"</span>==<span class="built_in">document</span>.documentElement.getAttribute(<span class="string">"dir"</span>);<span class="keyword">this</span>.removeFake(),<span class="keyword">this</span>.fakeHandlerCallback=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> t.removeFake()&#125;,<span class="keyword">this</span>.fakeHandler=<span class="keyword">this</span>.container.addEventListener(<span class="string">"click"</span>,<span class="keyword">this</span>.fakeHandlerCallback)||!<span class="number">0</span>,<span class="keyword">this</span>.fakeElem=<span class="built_in">document</span>.createElement(<span class="string">"textarea"</span>),<span class="keyword">this</span>.fakeElem.style.fontSize=<span class="string">"12pt"</span>,<span class="keyword">this</span>.fakeElem.style.border=<span class="string">"0"</span>,<span class="keyword">this</span>.fakeElem.style.padding=<span class="string">"0"</span>,<span class="keyword">this</span>.fakeElem.style.margin=<span class="string">"0"</span>,<span class="keyword">this</span>.fakeElem.style.position=<span class="string">"absolute"</span>,<span class="keyword">this</span>.fakeElem.style[e?<span class="string">"right"</span>:<span class="string">"left"</span>]=<span class="string">"-9999px"</span>;<span class="keyword">var</span> n=<span class="built_in">window</span>.pageYOffset||<span class="built_in">document</span>.documentElement.scrollTop;<span class="keyword">this</span>.fakeElem.style.top=n+<span class="string">"px"</span>,<span class="keyword">this</span>.fakeElem.setAttribute(<span class="string">"readonly"</span>,<span class="string">""</span>),<span class="keyword">this</span>.fakeElem.value=<span class="keyword">this</span>.text,<span class="keyword">this</span>.container.appendChild(<span class="keyword">this</span>.fakeElem),<span class="keyword">this</span>.selectedText=(<span class="number">0</span>,c.default)(<span class="keyword">this</span>.fakeElem),<span class="keyword">this</span>.copyText()&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"removeFake"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.fakeHandler&amp;&amp;(<span class="keyword">this</span>.container.removeEventListener(<span class="string">"click"</span>,<span class="keyword">this</span>.fakeHandlerCallback),<span class="keyword">this</span>.fakeHandler=<span class="literal">null</span>,<span class="keyword">this</span>.fakeHandlerCallback=<span class="literal">null</span>),<span class="keyword">this</span>.fakeElem&amp;&amp;(<span class="keyword">this</span>.container.removeChild(<span class="keyword">this</span>.fakeElem),<span class="keyword">this</span>.fakeElem=<span class="literal">null</span>)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"selectTarget"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.selectedText=(<span class="number">0</span>,c.default)(<span class="keyword">this</span>.target),<span class="keyword">this</span>.copyText()&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"copyText"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> e=<span class="keyword">void</span> <span class="number">0</span>;<span class="keyword">try</span>&#123;e=<span class="built_in">document</span>.execCommand(<span class="keyword">this</span>.action)&#125;<span class="keyword">catch</span>(t)&#123;e=!<span class="number">1</span>&#125;<span class="keyword">this</span>.handleResult(e)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"handleResult"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">this</span>.emitter.emit(t?<span class="string">"success"</span>:<span class="string">"error"</span>,&#123;<span class="attr">action</span>:<span class="keyword">this</span>.action,<span class="attr">text</span>:<span class="keyword">this</span>.selectedText,<span class="attr">trigger</span>:<span class="keyword">this</span>.trigger,<span class="attr">clearSelection</span>:<span class="keyword">this</span>.clearSelection.bind(<span class="keyword">this</span>)&#125;)&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"clearSelection"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.trigger&amp;&amp;<span class="keyword">this</span>.trigger.focus(),<span class="built_in">window</span>.getSelection().removeAllRanges()&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"destroy"</span>,<span class="attr">value</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.removeFake()&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"action"</span>,<span class="attr">set</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="number">0</span>&lt;<span class="built_in">arguments</span>.length&amp;&amp;<span class="keyword">void</span> <span class="number">0</span>!==<span class="built_in">arguments</span>[<span class="number">0</span>]?<span class="built_in">arguments</span>[<span class="number">0</span>]:<span class="string">"copy"</span>;<span class="keyword">if</span>(<span class="keyword">this</span>._action=t,<span class="string">"copy"</span>!==<span class="keyword">this</span>._action&amp;&amp;<span class="string">"cut"</span>!==<span class="keyword">this</span>._action)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid "action" value, use either "copy" or "cut"'</span>)&#125;,<span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>._action&#125;&#125;,&#123;<span class="attr">key</span>:<span class="string">"target"</span>,<span class="attr">set</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>!==t)&#123;<span class="keyword">if</span>(!t||<span class="string">"object"</span>!==(<span class="keyword">void</span> <span class="number">0</span>===t?<span class="string">"undefined"</span>:r(t))||<span class="number">1</span>!==t.nodeType)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid "target" value, use a valid Element'</span>);<span class="keyword">if</span>(<span class="string">"copy"</span>===<span class="keyword">this</span>.action&amp;&amp;t.hasAttribute(<span class="string">"disabled"</span>))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute'</span>);<span class="keyword">if</span>(<span class="string">"cut"</span>===<span class="keyword">this</span>.action&amp;&amp;(t.hasAttribute(<span class="string">"readonly"</span>)||t.hasAttribute(<span class="string">"disabled"</span>)))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes'</span>);<span class="keyword">this</span>._target=t&#125;&#125;,<span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>._target&#125;&#125;]),e&#125;();t.exports=u&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;t.exports=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">var</span> e;<span class="keyword">if</span>(<span class="string">"SELECT"</span>===t.nodeName)t.focus(),e=t.value;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"INPUT"</span>===t.nodeName||<span class="string">"TEXTAREA"</span>===t.nodeName)&#123;<span class="keyword">var</span> n=t.hasAttribute(<span class="string">"readonly"</span>);n||t.setAttribute(<span class="string">"readonly"</span>,<span class="string">""</span>),t.select(),t.setSelectionRange(<span class="number">0</span>,t.value.length),n||t.removeAttribute(<span class="string">"readonly"</span>),e=t.value&#125;<span class="keyword">else</span>&#123;t.hasAttribute(<span class="string">"contenteditable"</span>)&amp;&amp;t.focus();<span class="keyword">var</span> o=<span class="built_in">window</span>.getSelection(),r=<span class="built_in">document</span>.createRange();r.selectNodeContents(t),o.removeAllRanges(),o.addRange(r),e=o.toString()&#125;<span class="keyword">return</span> e&#125;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;&#125;n.prototype=&#123;<span class="attr">on</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">var</span> o=<span class="keyword">this</span>.e||(<span class="keyword">this</span>.e=&#123;&#125;);<span class="keyword">return</span>(o[t]||(o[t]=[])).push(&#123;<span class="attr">fn</span>:e,<span class="attr">ctx</span>:n&#125;),<span class="keyword">this</span>&#125;,<span class="attr">once</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">var</span> o=<span class="keyword">this</span>;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;o.off(t,r),e.apply(n,<span class="built_in">arguments</span>)&#125;<span class="keyword">return</span> r._=e,<span class="keyword">this</span>.on(t,r,n)&#125;,<span class="attr">emit</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=[].slice.call(<span class="built_in">arguments</span>,<span class="number">1</span>),n=((<span class="keyword">this</span>.e||(<span class="keyword">this</span>.e=&#123;&#125;))[t]||[]).slice(),o=<span class="number">0</span>,r=n.length;o&lt;r;o++)n[o].fn.apply(n[o].ctx,e);<span class="keyword">return</span> <span class="keyword">this</span>&#125;,<span class="attr">off</span>:<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">var</span> n=<span class="keyword">this</span>.e||(<span class="keyword">this</span>.e=&#123;&#125;),o=n[t],r=[];<span class="keyword">if</span>(o&amp;&amp;e)<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,a=o.length;i&lt;a;i++)o[i].fn!==e&amp;&amp;o[i].fn._!==e&amp;&amp;r.push(o[i]);<span class="keyword">return</span> r.length?n[t]=r:<span class="keyword">delete</span> n[t],<span class="keyword">this</span>&#125;&#125;,t.exports=n&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">var</span> d=n(<span class="number">5</span>),h=n(<span class="number">6</span>);t.exports=<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">if</span>(!t&amp;&amp;!e&amp;&amp;!n)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Missing required arguments"</span>);<span class="keyword">if</span>(!d.string(e))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Second argument must be a String"</span>);<span class="keyword">if</span>(!d.fn(n))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Third argument must be a Function"</span>);<span class="keyword">if</span>(d.node(t))<span class="keyword">return</span> s=e,f=n,(l=t).addEventListener(s,f),&#123;<span class="attr">destroy</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;l.removeEventListener(s,f)&#125;&#125;;<span class="keyword">if</span>(d.nodeList(t))<span class="keyword">return</span> a=t,c=e,u=n,<span class="built_in">Array</span>.prototype.forEach.call(a,<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;t.addEventListener(c,u)&#125;),&#123;<span class="attr">destroy</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">Array</span>.prototype.forEach.call(a,<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;t.removeEventListener(c,u)&#125;)&#125;&#125;;<span class="keyword">if</span>(d.string(t))<span class="keyword">return</span> o=t,r=e,i=n,h(<span class="built_in">document</span>.body,o,r,i);<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"First argument must be a String, HTMLElement, HTMLCollection, or NodeList"</span>);<span class="keyword">var</span> o,r,i,a,c,u,l,s,f&#125;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,n</span>)</span>&#123;n.node=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>!==t&amp;&amp;t <span class="keyword">instanceof</span> HTMLElement&amp;&amp;<span class="number">1</span>===t.nodeType&#125;,n.nodeList=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">var</span> e=<span class="built_in">Object</span>.prototype.toString.call(t);<span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>!==t&amp;&amp;(<span class="string">"[object NodeList]"</span>===e||<span class="string">"[object HTMLCollection]"</span>===e)&amp;&amp;<span class="string">"length"</span><span class="keyword">in</span> t&amp;&amp;(<span class="number">0</span>===t.length||n.node(t[<span class="number">0</span>]))&#125;,n.string=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span><span class="string">"string"</span>==<span class="keyword">typeof</span> t||t <span class="keyword">instanceof</span> <span class="built_in">String</span>&#125;,n.fn=<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span><span class="string">"[object Function]"</span>===<span class="built_in">Object</span>.prototype.toString.call(t)&#125;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n</span>)</span>&#123;<span class="keyword">var</span> a=n(<span class="number">7</span>);<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">t,e,n,o,r</span>)</span>&#123;<span class="keyword">var</span> i=<span class="function"><span class="keyword">function</span>(<span class="params">e,n,t,o</span>)</span>&#123;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;t.delegateTarget=a(t.target,n),t.delegateTarget&amp;&amp;o.call(e,t)&#125;&#125;.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);<span class="keyword">return</span> t.addEventListener(n,i,r),&#123;<span class="attr">destroy</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;t.removeEventListener(n,i,r)&#125;&#125;&#125;t.exports=<span class="function"><span class="keyword">function</span>(<span class="params">t,e,n,o,r</span>)</span>&#123;<span class="keyword">return</span><span class="string">"function"</span>==<span class="keyword">typeof</span> t.addEventListener?i.apply(<span class="literal">null</span>,<span class="built_in">arguments</span>):<span class="string">"function"</span>==<span class="keyword">typeof</span> n?i.bind(<span class="literal">null</span>,<span class="built_in">document</span>).apply(<span class="literal">null</span>,<span class="built_in">arguments</span>):(<span class="string">"string"</span>==<span class="keyword">typeof</span> t&amp;&amp;(t=<span class="built_in">document</span>.querySelectorAll(t)),<span class="built_in">Array</span>.prototype.map.call(t,<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;<span class="keyword">return</span> i(t,e,n,o,r)&#125;))&#125;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">if</span>(<span class="string">"undefined"</span>!=<span class="keyword">typeof</span> Element&amp;&amp;!Element.prototype.matches)&#123;<span class="keyword">var</span> n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector&#125;t.exports=<span class="function"><span class="keyword">function</span>(<span class="params">t,e</span>)</span>&#123;<span class="keyword">for</span>(;t&amp;&amp;<span class="number">9</span>!==t.nodeType;)&#123;<span class="keyword">if</span>(<span class="string">"function"</span>==<span class="keyword">typeof</span> t.matches&amp;&amp;t.matches(e))<span class="keyword">return</span> t;t=t.parentNode&#125;&#125;&#125;])&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Java Web项目设置项目默认页</title>
      <link href="/2019/04/11/Java%20Web%E9%A1%B9%E7%9B%AE%E8%AE%BE%E7%BD%AE%E9%A1%B9%E7%9B%AE%E9%BB%98%E8%AE%A4%E9%A1%B5/"/>
      <url>/2019/04/11/Java%20Web%E9%A1%B9%E7%9B%AE%E8%AE%BE%E7%BD%AE%E9%A1%B9%E7%9B%AE%E9%BB%98%E8%AE%A4%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="设置项目默认页"><a href="#设置项目默认页" class="headerlink" title="设置项目默认页"></a>设置项目默认页</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.Ordered;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 设置默认页为登录主页</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2018/12/24 16:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultView</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//设置默认页的路径</span></span><br><span class="line">        registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"login/login"</span>);</span><br><span class="line">        registry.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br><span class="line">        <span class="keyword">super</span>.addViewControllers(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown文本编辑器editor.md配置图片上传</title>
      <link href="/2019/04/11/MarkDown%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8editor.md%E9%85%8D%E7%BD%AE%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/"/>
      <url>/2019/04/11/MarkDown%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8editor.md%E9%85%8D%E7%BD%AE%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="MarkDown文本编辑器editor-md配置图片上传"><a href="#MarkDown文本编辑器editor-md配置图片上传" class="headerlink" title="MarkDown文本编辑器editor.md配置图片上传"></a>MarkDown文本编辑器editor.md配置图片上传</h2><h2 id="Js"><a href="#Js" class="headerlink" title="Js"></a>Js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载markdown</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    testEditor = editormd(<span class="string">"test-editormd"</span>, &#123;</span><br><span class="line">        placeholder : <span class="string">"此处开始编写您要发布的内容..."</span>,<span class="comment">//初始化文字</span></span><br><span class="line">        width   : <span class="string">"95%"</span>,</span><br><span class="line">        height  : <span class="number">640</span>,</span><br><span class="line">        codeFold : <span class="literal">true</span>,</span><br><span class="line">        tocm: <span class="literal">true</span>,<span class="comment">//开启顶部目录功能</span></span><br><span class="line">        imageUpload: <span class="literal">false</span>,<span class="comment">//图片上传功能</span></span><br><span class="line">        imageFormats : [<span class="string">"jpg"</span>, <span class="string">"jpeg"</span>, <span class="string">"gif"</span>, <span class="string">"png"</span>, <span class="string">"bmp"</span>, <span class="string">"webp"</span>],<span class="comment">//可上传图片类型</span></span><br><span class="line">        imageUploadURL : <span class="string">"../article/uploadImage"</span>,<span class="comment">//图片上传路径</span></span><br><span class="line">        syncScrolling : <span class="string">"single"</span>,</span><br><span class="line">        tex: <span class="literal">true</span>,                   <span class="comment">// 开启科学公式TeX语言支持，默认关闭</span></span><br><span class="line">        flowChart: <span class="literal">true</span>,             <span class="comment">// 开启流程图支持，默认关闭</span></span><br><span class="line">        sequenceDiagram: <span class="literal">true</span>,       <span class="comment">// 开启时序/序列图支持，默认关闭,</span></span><br><span class="line">        emoji: <span class="literal">false</span>,<span class="comment">//表情功能</span></span><br><span class="line">        path    : <span class="string">"/js/editor/lib/"</span><span class="comment">//系统包(editor的lib包)</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传图片</span></span><br><span class="line"><span class="comment"> * 方法名中的<span class="doctag">@RequestParam</span>注解value值为editor.md要求的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> attach</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"uploadImage"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> HashMap&lt;String, Object&gt; <span class="title">uploadImage</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">                  @RequestParam(value = <span class="string">"editormd-image-file"</span>, required = <span class="keyword">false</span>)</span> MultipartFile attach) </span>&#123;</span><br><span class="line"><span class="comment">//存储图片逻辑</span></span><br><span class="line">    <span class="comment">//返回数据集合(editor.md要求的格式)</span></span><br><span class="line">    HashMap&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// 下面response返回的json格式是editor.md所限制的，规范输出就OK</span></span><br><span class="line">    result.put(<span class="string">"success"</span>, <span class="number">1</span>);</span><br><span class="line">    result.put(<span class="string">"message"</span>, <span class="string">"上传成功"</span>);</span><br><span class="line">    result.put(<span class="string">"url"</span>, <span class="string">"已上传图片的url"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Editor.md </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git入门</title>
      <link href="/2019/04/11/Git%E5%85%A5%E9%97%A8/"/>
      <url>/2019/04/11/Git%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h2><p>工作区就是你克隆项目到本地后，项目所在的文件夹目录。</p><h2 id="暂存区-stage-index"><a href="#暂存区-stage-index" class="headerlink" title="暂存区(stage/index)"></a>暂存区(stage/index)</h2><p>用于存储工作区中添加上来的变更（新增、修改、删除）的文件的地方。操作时，使用git add .会将本地所有新增、变更、删除过的文件的情况存入暂存区中，这些信息会存储到仓库目录下.git文件夹中的index文件中，该文件中以索引的形式存储着你的操作，Git 提交实际读取的是暂存区域的内容，而与工作区域的文件无关，当你修改了文件之后，如果没有添加git add到暂存区域，并不会保存到版本库</p><a id="more"></a><h2 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h2><p>用于存储本地工作区和暂存区提交上来的变更（新增、修改、删除）过的文件的地方，操作时，使用git commit –m “本次更新信息” 可以将添加到暂存区的修改的文件提交到本地仓库中。</p><p><img src="https://upload-images.jianshu.io/upload_images/15089845-5ed15c4eae2e3e02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交区域.png"></p><h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>就是最后所有人存储代码的地方，这个仓库中会拥有一个master分支(系统自动创建的唯一分支)，与若干个其他人创建的分支，不同的人与不同的模块会上传到不同的分支中保存，最后确认不误后合并到master分支中。</p><h2 id="分支-branch"><a href="#分支-branch" class="headerlink" title="分支(branch )"></a>分支(branch )</h2><p>假设此时有一个项目，项目组有5个人，那么就会创建5个分支，每个人一个分支开发自己的模块，最后确认无误后在全部整合到master模块。</p><h2 id="版本指针-HEAD"><a href="#版本指针-HEAD" class="headerlink" title="版本指针(HEAD)"></a>版本指针(HEAD)</h2><p>HEAD在git中的指的是当前版本</p><h2 id="标签-tag"><a href="#标签-tag" class="headerlink" title="标签(tag)"></a>标签(tag)</h2><p>用来标记版本，一般为项目的版本，如V1.0 、V2.0 等。</p><h2 id="历史-log"><a href="#历史-log" class="headerlink" title="历史(log)"></a>历史(log)</h2><p>存储着每个版本的具体信息。</p><h1 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h1><p><img src="https://upload-images.jianshu.io/upload_images/15089845-01d9fc1b3e99aa6d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Git工作流程.png"></p><h1 id="命令："><a href="#命令：" class="headerlink" title="命令："></a>命令：</h1><h2 id="git的基本与常见操作："><a href="#git的基本与常见操作：" class="headerlink" title="git的基本与常见操作："></a>git的基本与常见操作：</h2><h3 id="初始化即创建git仓库"><a href="#初始化即创建git仓库" class="headerlink" title="初始化即创建git仓库"></a>初始化即创建git仓库</h3><pre><code>$ git init</code></pre><h3 id="克隆代码"><a href="#克隆代码" class="headerlink" title="克隆代码"></a>克隆代码</h3><pre><code>$ git clone 地址    </code></pre><h3 id="添加到缓存区"><a href="#添加到缓存区" class="headerlink" title="添加到缓存区"></a>添加到缓存区</h3><pre><code>$ git add 文件名</code></pre><h3 id="更新代码，并附有更新历史信息-更新到本地仓库"><a href="#更新代码，并附有更新历史信息-更新到本地仓库" class="headerlink" title="更新代码，并附有更新历史信息(更新到本地仓库)"></a>更新代码，并附有更新历史信息(更新到本地仓库)</h3><pre><code>$ git commit -m &quot;代码提交信息&quot;</code></pre><h3 id="从本地仓库提交代码到远程仓库的master分支-可以是任何分支，一般为自己创建的分支，最后再往master分支中合并"><a href="#从本地仓库提交代码到远程仓库的master分支-可以是任何分支，一般为自己创建的分支，最后再往master分支中合并" class="headerlink" title="从本地仓库提交代码到远程仓库的master分支(可以是任何分支，一般为自己创建的分支，最后再往master分支中合并)"></a>从本地仓库提交代码到远程仓库的master分支(可以是任何分支，一般为自己创建的分支，最后再往master分支中合并)</h3><pre><code>$ git push origin master</code></pre><h2 id="分支："><a href="#分支：" class="headerlink" title="分支："></a>分支：</h2><h3 id="查看有哪些分支"><a href="#查看有哪些分支" class="headerlink" title="查看有哪些分支"></a>查看有哪些分支</h3><pre><code>$ git branch</code></pre><h3 id="从远程仓库下载新分支与数据即更新所有分支"><a href="#从远程仓库下载新分支与数据即更新所有分支" class="headerlink" title="从远程仓库下载新分支与数据即更新所有分支"></a>从远程仓库下载新分支与数据即更新所有分支</h3><pre><code>$ git fetch</code></pre><h3 id="从远端仓库提取数据并尝试合并到当前分支"><a href="#从远端仓库提取数据并尝试合并到当前分支" class="headerlink" title="从远端仓库提取数据并尝试合并到当前分支"></a>从远端仓库提取数据并尝试合并到当前分支</h3><pre><code>$ git pull</code></pre><h3 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h3><pre><code>$ git push origin :需要删除的分支名称</code></pre><h3 id="删除本地仓库的远程仓库链接"><a href="#删除本地仓库的远程仓库链接" class="headerlink" title="删除本地仓库的远程仓库链接"></a>删除本地仓库的远程仓库链接</h3><pre><code>$ git remote rm 需要删除的链接名称</code></pre><h3 id="切换到指定分支"><a href="#切换到指定分支" class="headerlink" title="切换到指定分支"></a>切换到指定分支</h3><pre><code>$ git checkout 需要切换到的分支名称</code></pre><h3 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h3><pre><code>$ git branch 新建的分支名称</code></pre><h3 id="合并两个分支"><a href="#合并两个分支" class="headerlink" title="合并两个分支"></a>合并两个分支</h3><pre><code>$ git merge 需要合并的分支名称A 需要合并的分支名称B</code></pre><h3 id="将需要合并的分支合并到当前分支中，并自动进行新的提交"><a href="#将需要合并的分支合并到当前分支中，并自动进行新的提交" class="headerlink" title="将需要合并的分支合并到当前分支中，并自动进行新的提交"></a>将需要合并的分支合并到当前分支中，并自动进行新的提交</h3><pre><code>$ git merge 需要合并到当前分支的分支名称</code></pre><h3 id="将需要合并的分支合并到当前分支中，并不自动进行新的提交"><a href="#将需要合并的分支合并到当前分支中，并不自动进行新的提交" class="headerlink" title="将需要合并的分支合并到当前分支中，并不自动进行新的提交"></a>将需要合并的分支合并到当前分支中，并不自动进行新的提交</h3><pre><code>$ git merge --no-commit 需要合并到当前分支的分支名称</code></pre><h3 id="列出已经存在的远程分支"><a href="#列出已经存在的远程分支" class="headerlink" title="列出已经存在的远程分支"></a>列出已经存在的远程分支</h3><pre><code>$ git remote</code></pre><h3 id="列出已经存在的远程分支的详细信息"><a href="#列出已经存在的远程分支的详细信息" class="headerlink" title="列出已经存在的远程分支的详细信息"></a>列出已经存在的远程分支的详细信息</h3><pre><code>$ git remote -v</code></pre><h3 id="git-branch命令的-r选项，可以用来查看远程分支，-a选项查看所有分支"><a href="#git-branch命令的-r选项，可以用来查看远程分支，-a选项查看所有分支" class="headerlink" title="git branch命令的-r选项，可以用来查看远程分支，-a选项查看所有分支"></a>git branch命令的-r选项，可以用来查看远程分支，-a选项查看所有分支</h3><pre><code>$ git branch -r/a</code></pre><p>##<br>    $ git branch -r<br>    origin/master<br>    $ git branch -a</p><pre><code>* masterremotes/origin/master其中，origin为主机名，master为分支名</code></pre><h2 id="标签："><a href="#标签：" class="headerlink" title="标签："></a>标签：</h2><h3 id="给当前版本添加标签，以便记录与标记"><a href="#给当前版本添加标签，以便记录与标记" class="headerlink" title="给当前版本添加标签，以便记录与标记"></a>给当前版本添加标签，以便记录与标记</h3><pre><code>$ git tag -a 添加的标签</code></pre><h3 id="追加标签即给之前的版本添加标签"><a href="#追加标签即给之前的版本添加标签" class="headerlink" title="追加标签即给之前的版本添加标签"></a>追加标签即给之前的版本添加标签</h3><pre><code>$ git tag -a 添加的标签 需要添加标签的版本号</code></pre><h3 id="查看所有的标签"><a href="#查看所有的标签" class="headerlink" title="查看所有的标签"></a>查看所有的标签</h3><pre><code>$ git tag</code></pre><h2 id="历史："><a href="#历史：" class="headerlink" title="历史："></a>历史：</h2><h3 id="查看历史信息-详细"><a href="#查看历史信息-详细" class="headerlink" title="查看历史信息(详细)"></a>查看历史信息(详细)</h3><pre><code>$ git log --oneline --graph --decorate</code></pre><h3 id="查看命令历史记录"><a href="#查看命令历史记录" class="headerlink" title="查看命令历史记录"></a>查看命令历史记录</h3><pre><code>$ git reflog</code></pre><h3 id="查看历史信息并筛选，只获取版本号和版本说明信息"><a href="#查看历史信息并筛选，只获取版本号和版本说明信息" class="headerlink" title="查看历史信息并筛选，只获取版本号和版本说明信息"></a>查看历史信息并筛选，只获取版本号和版本说明信息</h3><pre><code>$ git log --pretty=oneline</code></pre><h3 id="查看当前文件的哪些地方被修改了"><a href="#查看当前文件的哪些地方被修改了" class="headerlink" title="查看当前文件的哪些地方被修改了"></a>查看当前文件的哪些地方被修改了</h3><pre><code>$ git diff 文件名</code></pre><h3 id="显示工作目录和暂存区的状态及修改信息"><a href="#显示工作目录和暂存区的状态及修改信息" class="headerlink" title="显示工作目录和暂存区的状态及修改信息"></a>显示工作目录和暂存区的状态及修改信息</h3><pre><code>$ git status</code></pre><h2 id="回退版本："><a href="#回退版本：" class="headerlink" title="回退版本："></a>回退版本：</h2><h3 id="回退到上一个版本"><a href="#回退到上一个版本" class="headerlink" title="回退到上一个版本"></a>回退到上一个版本</h3><pre><code>$ git reset --hard HEAD^</code></pre><h3 id="回退到上上个版本"><a href="#回退到上上个版本" class="headerlink" title="回退到上上个版本"></a>回退到上上个版本</h3><pre><code>$ git reset --hard HEAD^^</code></pre><h3 id="回退到前100个版本"><a href="#回退到前100个版本" class="headerlink" title="回退到前100个版本"></a>回退到前100个版本</h3><pre><code>$ git reset --hard HEAD~100</code></pre><h3 id="回退到指定的版本通过版本号"><a href="#回退到指定的版本通过版本号" class="headerlink" title="回退到指定的版本通过版本号"></a>回退到指定的版本通过版本号</h3><pre><code>$ git reset --hard 你要回退的版本号  </code></pre>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Github博客小功能之添加不蒜子访问统计</title>
      <link href="/2019/04/11/Hexo+Github%E5%8D%9A%E5%AE%A2%E5%B0%8F%E5%8A%9F%E8%83%BD%E4%B9%8B%E6%B7%BB%E5%8A%A0%E4%B8%8D%E8%92%9C%E5%AD%90%E8%AE%BF%E9%97%AE%E7%BB%9F%E8%AE%A1/"/>
      <url>/2019/04/11/Hexo+Github%E5%8D%9A%E5%AE%A2%E5%B0%8F%E5%8A%9F%E8%83%BD%E4%B9%8B%E6%B7%BB%E5%8A%A0%E4%B8%8D%E8%92%9C%E5%AD%90%E8%AE%BF%E9%97%AE%E7%BB%9F%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="引入不蒜子js"><a href="#引入不蒜子js" class="headerlink" title="引入不蒜子js"></a>引入不蒜子js</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=&quot;//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="显示统计数"><a href="#显示统计数" class="headerlink" title="显示统计数"></a>显示统计数</h2><h3 id="访问量统计"><a href="#访问量统计" class="headerlink" title="访问量统计"></a>访问量统计</h3><p>算法a：pv的方式，单个用户连续点击n篇文章，记录n次访问量。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;</span><br><span class="line">    本站总访问量&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;次</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="访问人数统计"><a href="#访问人数统计" class="headerlink" title="访问人数统计"></a>访问人数统计</h3><p>算法b：uv的方式，单个用户连续点击n篇文章，只记录1次访客数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;</span><br><span class="line">  本站访客数&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;人次</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><p>把上述代码复制到ejs或者是swig文件即可，一般为footer.ejs(footer.seig)最后边。</p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>js需要放在span前边且在添加完毕后localhost:4000中显示的访问量为官方的数据，自己的数据需要上传到GitHub后到自己的网站查看(初始化数据为0)。</p>]]></content>
      
      
      <categories>
          
          <category> 建站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Idea中SpringBoot读取配置文件失败解决方案</title>
      <link href="/2019/04/11/Idea%E4%B8%ADSpringBoot%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2019/04/11/Idea%E4%B8%ADSpringBoot%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringBoot启动类启动报错"><a href="#SpringBoot启动类启动报错" class="headerlink" title="SpringBoot启动类启动报错"></a>SpringBoot启动类启动报错</h2><p><strong>如加载bean失败、找不到依赖包、找不到配置文件等</strong></p><a id="more"></a><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p><strong>设置resources为资源文件夹</strong><br><img src="http://106.13.51.1:8100/imgs/2019/05/ea2b1022f6c9a5db.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Github博客小功能之字数与阅读时长统计</title>
      <link href="/2019/04/11/Hexo+Github%E5%8D%9A%E5%AE%A2%E5%B0%8F%E5%8A%9F%E8%83%BD%E4%B9%8B%E5%AD%97%E6%95%B0%E4%B8%8E%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1/"/>
      <url>/2019/04/11/Hexo+Github%E5%8D%9A%E5%AE%A2%E5%B0%8F%E5%8A%9F%E8%83%BD%E4%B9%8B%E5%AD%97%E6%95%B0%E4%B8%8E%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="字数与阅读时长统计"><a href="#字数与阅读时长统计" class="headerlink" title="字数与阅读时长统计"></a>字数与阅读时长统计</h1><h2 id="插件wordcount"><a href="#插件wordcount" class="headerlink" title="插件wordcount"></a>插件wordcount</h2><p>在主题配置文件(博客目录名称\themes\主题名称\config.yml)中加入wordcount插件，如果是Next等已经集成该插件的主题，加入后即可实现,若主题未集成则需其他操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># wordcount文字统计插件</span><br><span class="line"># Dependencies: https://github.com/willin/hexo-wordcount</span><br><span class="line">post_wordcount:</span><br><span class="line">item_text: true</span><br><span class="line">wordcount: true</span><br><span class="line">min2read: true</span><br></pre></td></tr></table></figure></p><p>官方提供了三种格式添加方式，分别为Swig、Ejs、Jade，下方为三种添加方式，也可查看官方文档<a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">Wordcount文档</a>，另外可对统计进行DIY如添加文字说明对统计加粗等。</p><a id="more"></a><h3 id="以Ejs为例："><a href="#以Ejs为例：" class="headerlink" title="以Ejs为例："></a>以Ejs为例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本篇博文字数为&lt;span class=&quot;post-count&quot;&gt;&lt;b&gt;&#123;&#123; wordcount(post.content) &#125;&#125;&lt;/b&gt;&lt;/span&gt;字</span><br></pre></td></tr></table></figure><h3 id="Swig"><a href="#Swig" class="headerlink" title="Swig"></a>Swig</h3><p>本篇博文字数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;post-count&quot;&gt;&#123;&#123; wordcount(post.content) &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><p>本篇博文阅读时长:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;post-count&quot;&gt;&#123;&#123; min2read(post.content) &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><p>博客全站总字数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;post-count&quot;&gt;&#123;&#123; totalcount(site, &apos;0,0.0a&apos;) &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><p>Second param format optional.</p><h3 id="Ejs"><a href="#Ejs" class="headerlink" title="Ejs"></a>Ejs</h3><p>本篇博文字数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;post-count&quot;&gt;&lt;%= wordcount(post.content) %&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><p>本篇博文阅读时长:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;post-count&quot;&gt;&lt;%= min2read(post.content) %&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><p>博客全站总字数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;post-count&quot;&gt;&lt;%= totalcount(site) %&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><h3 id="Jade"><a href="#Jade" class="headerlink" title="Jade"></a>Jade</h3><p>本篇博文字数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">span.post-count= wordcount(post.content)</span><br></pre></td></tr></table></figure></p><p>本篇博文阅读时长:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">span.post-count= min2read(post.content)</span><br></pre></td></tr></table></figure></p><p>博客全站总字数:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">span.post-count= totalcount(site)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 建站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java进行IO(文件)操作</title>
      <link href="/2019/04/11/Java%E8%BF%9B%E8%A1%8CIO(%E6%96%87%E4%BB%B6)%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/04/11/Java%E8%BF%9B%E8%A1%8CIO(%E6%96%87%E4%BB%B6)%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="FileUtil"><a href="#FileUtil" class="headerlink" title="FileUtil"></a>FileUtil</h2><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除文件 或者文件夹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(String path)</span></span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(path);</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">            <span class="keyword">if</span>(file.isFile())&#123;</span><br><span class="line">                flag = file.delete();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                File[] _fileArr = file.listFiles();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;_fileArr.length;i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!(flag = delete(_fileArr[i].getAbsolutePath()))) <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                flag = flag &amp;&amp; file.delete();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除指定后缀名的文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> path 文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filter 要删除文件的后缀名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(String path,String filter)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">        File file = <span class="keyword">new</span> File(path);</span><br><span class="line">        <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">            <span class="keyword">if</span>(file.isFile() &amp;&amp; file.getName().endsWith(filter))&#123;</span><br><span class="line">                flag = file.delete();</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(file.isDirectory())&#123;</span><br><span class="line">                File[] fileArr = file.listFiles();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;fileArr.length;i++)&#123;</span><br><span class="line">                    File _file = fileArr[i];</span><br><span class="line">                    <span class="keyword">if</span>(!(flag = delete(_file.getAbsolutePath(),filter))) <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得文件名和后缀名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> path 文件路径或文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] getNameAndSuffix(String path)&#123;</span><br><span class="line">        String[] fileNameArr = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> index = path.lastIndexOf(<span class="string">"/"</span>);</span><br><span class="line">        String fileName = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span>(index != (path.length() -<span class="number">1</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span>(index != -<span class="number">1</span>)&#123;</span><br><span class="line">                fileName = path.substring(index+<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                fileName = path;</span><br><span class="line">            &#125;</span><br><span class="line">            index = fileName.lastIndexOf(<span class="string">"."</span>);</span><br><span class="line">            <span class="keyword">if</span>(index != -<span class="number">1</span> &amp;&amp; index != (fileName.length() -<span class="number">1</span>))&#123;</span><br><span class="line">                fileNameArr = fileName.split(<span class="string">"\\."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fileNameArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName  文件名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputStream   流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ftlPath   文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  是否创建成功，成功则返回true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">createFile</span><span class="params">(String fileName, InputStream inputStream,String ftlPath)</span></span>&#123;</span><br><span class="line">        Boolean bool = <span class="keyword">false</span>;</span><br><span class="line">        ftlPath = ftlPath + <span class="string">"/"</span> + fileName;<span class="comment">//文件路径+名称.文件类型</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(ftlPath);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//如果文件不存在，则创建新的文件</span></span><br><span class="line">            <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">                file.createNewFile();</span><br><span class="line">                bool = <span class="keyword">true</span>;</span><br><span class="line">                System.out.println(<span class="string">"success create file,the file is "</span>+ftlPath);</span><br><span class="line">                <span class="comment">//创建文件成功后，写入内容到文件里</span></span><br><span class="line">                InputStreamToFile(inputStream, ftlPath);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bool;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向文件中写入内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputStream 文件内容(流)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filepath 文件路径与名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InputStreamToFile</span><span class="params">(InputStream inputStream, String filepath)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> BUFFER_SIZE = <span class="number">1024</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[BUFFER_SIZE];</span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//获取网络输入流</span></span><br><span class="line">        bis = <span class="keyword">new</span> BufferedInputStream(inputStream);</span><br><span class="line">        <span class="comment">//建立文件</span></span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(filepath);</span><br><span class="line">        <span class="comment">//保存文件</span></span><br><span class="line">        <span class="keyword">while</span> ( (size = bis.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(buf, <span class="number">0</span>, size);</span><br><span class="line">        &#125;</span><br><span class="line">        fos.close();</span><br><span class="line">        bis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向文件中写入内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileString 文件内容(字符串)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filepath 文件路径与名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StringToFile</span><span class="params">(String fileString, String filepath)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> BUFFER_SIZE = <span class="number">1024</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[BUFFER_SIZE];</span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//输入流(设置编码集为UTF-8)</span></span><br><span class="line">        InputStream is = <span class="keyword">new</span> ByteArrayInputStream(fileString.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">        <span class="comment">//获取网络输入流</span></span><br><span class="line">        bis = <span class="keyword">new</span> BufferedInputStream(is);</span><br><span class="line">        <span class="comment">//建立文件</span></span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(filepath);</span><br><span class="line">        <span class="comment">//保存文件</span></span><br><span class="line">        <span class="keyword">while</span> ( (size = bis.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(buf, <span class="number">0</span>, size);</span><br><span class="line">        &#125;</span><br><span class="line">        fos.close();</span><br><span class="line">        bis.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * @描述 创建指定文件夹</span></span><br><span class="line"><span class="comment">     * @作者 zhenghr</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@param</span> folderPath</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * @时间 2017-6-24下午4:55:40</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">makeDirs</span><span class="params">(String folderPath)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!CommonUtil.checkIsNullOrEmpty(folderPath))&#123;</span><br><span class="line">            File folder = <span class="keyword">new</span> File(folderPath);</span><br><span class="line">            <span class="keyword">return</span> makeDirs(folder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.err.println(<span class="string">"创建文件夹失败！folderPath=&#123;"</span> + folderPath + <span class="string">"&#125;"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">makeDirs</span><span class="params">(File folder)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!folder.exists())&#123;</span><br><span class="line">            <span class="keyword">return</span> folder.mkdirs();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * @描述 将字符串内容追加至指定文件</span></span><br><span class="line"><span class="comment">     * @作者 zhenghr</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@param</span> content</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * @时间 2017-6-24下午4:56:07</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">appendStrFile</span><span class="params">(String path,String fileName,String content)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(CommonUtil.checkIsNullOrEmpty(path))&#123;</span><br><span class="line">            result = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(CommonUtil.checkIsNullOrEmpty(fileName))&#123;</span><br><span class="line">            result = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(CommonUtil.checkIsNullOrEmpty(content))&#123;</span><br><span class="line">            result = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(result)&#123;</span><br><span class="line">            result = appendStrFile(path+<span class="string">"/"</span>+fileName, content);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.err.println(<span class="string">"appendStrFile(String,String,String)失败-&gt;path=&#123;"</span> + path + <span class="string">"&#125;,fileName=&#123;"</span> + fileName + <span class="string">"&#125;,content=&#123;"</span> + content + <span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * @描述 将字符串内容追加至指定文件</span></span><br><span class="line"><span class="comment">     * @作者 zhenghr</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@param</span> filePath</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@param</span> content</span></span><br><span class="line"><span class="comment">     * @参数 <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * @时间 2017-6-24下午4:57:09</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">appendStrFile</span><span class="params">(String filePath,String content)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(CommonUtil.checkIsNullOrEmpty(filePath))&#123;</span><br><span class="line">            result = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(result)&#123;</span><br><span class="line">            result = appendStrFile(<span class="keyword">new</span> File(filePath), content);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.err.println(<span class="string">"appendStrFile(String,String,String)失败-&gt;filePath=&#123;"</span> + filePath + <span class="string">"&#125;,content=&#123;"</span> + content + <span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">appendStrFile</span><span class="params">(File file, String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (CommonUtil.checkIsNullOrEmpty(file)) &#123;</span><br><span class="line">            result = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (CommonUtil.checkIsNullOrEmpty(content)) &#123;</span><br><span class="line">            result = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (result) &#123;</span><br><span class="line">            FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">            BufferedWriter bf = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">boolean</span> append = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (file.exists())&#123;</span><br><span class="line">                    append = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                fw = <span class="keyword">new</span> FileWriter(file, append);<span class="comment">// 同时创建新文件</span></span><br><span class="line">                <span class="comment">// 创建字符输出流对象</span></span><br><span class="line">                bf = <span class="keyword">new</span> BufferedWriter(fw);</span><br><span class="line">                <span class="comment">// 创建缓冲字符输出流对象</span></span><br><span class="line">                bf.append(content);</span><br><span class="line">                bf.flush();</span><br><span class="line">                bf.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                result = <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span>(fw!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                        fw.close();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(bf != <span class="keyword">null</span>)&#123;</span><br><span class="line">                        bf.close();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    result = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.err.println(<span class="string">"appendStrFile(File,String)失败-&gt;file=&#123;"</span> + file + <span class="string">"&#125;,content=&#123;"</span> + content + <span class="string">"&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java图片&amp;base64的转换</title>
      <link href="/2019/04/11/Java%E5%9B%BE%E7%89%87&amp;base64%E7%9A%84%E8%BD%AC%E6%8D%A2/"/>
      <url>/2019/04/11/Java%E5%9B%BE%E7%89%87&amp;base64%E7%9A%84%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="释义"><a href="#释义" class="headerlink" title="释义"></a>释义</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Base64是网络上最常见的用于传输<span class="number">8</span>Bit字节码的编码方式之一，Base64就是一种基于<span class="number">64</span>个可打印字符来表示二进制数据的方法。</span><br></pre></td></tr></table></figure><p><a href="https://baike.baidu.com/item/base64/8545775?fr=aladdin" target="_blank" rel="noopener">释义来自百度百科</a></p><a id="more"></a><h2 id="在线转换网站"><a href="#在线转换网站" class="headerlink" title="在线转换网站"></a>在线转换网站</h2><p><a href="http://tool.chinaz.com/tools/imgtobase/" target="_blank" rel="noopener">站长工具</a></p><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"base64编码"</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;commons-codec&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.10&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="Base64Utils"><a href="#Base64Utils" class="headerlink" title="Base64Utils"></a>Base64Utils</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 进行图片和base64的转换</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 無曦</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Base64Utils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将图片转换为base64编码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> imgFile 待转换的图片路径</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">GetImageStr</span><span class="params">(String imgFile)</span></span>&#123;</span><br><span class="line"><span class="comment">//将图片文件转化为字节数组字符串，并对其进行Base64编码处理</span></span><br><span class="line">        InputStream in = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//读取图片字节数组</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            in = <span class="keyword">new</span> FileInputStream(imgFile);        </span><br><span class="line">            data = <span class="keyword">new</span> <span class="keyword">byte</span>[in.available()];</span><br><span class="line">            in.read(data);</span><br><span class="line">            in.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//对字节数组Base64编码</span></span><br><span class="line">        Base64 base64 = <span class="keyword">new</span> Base64();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(base64.encode(data));<span class="comment">//返回Base64编码过的字节数组字符串</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将base64位编码 转换为图片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imgStr base64编码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imgFilePath 图片保存路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">GenerateImage</span><span class="params">(String imgFilePath,String imgStr)</span></span>&#123;   </span><br><span class="line">    <span class="comment">//对字节数组字符串进行Base64解码并生成图片</span></span><br><span class="line">        <span class="keyword">if</span> (imgStr == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//如果路径不存在 则创建</span></span><br><span class="line">        imgFilePath = imgFilePath.replaceAll(<span class="string">"\\\\"</span>, <span class="string">"/"</span>);</span><br><span class="line">        <span class="keyword">int</span> index = imgFilePath.lastIndexOf(<span class="string">"/"</span>);</span><br><span class="line">        <span class="keyword">if</span>(index != -<span class="number">1</span>)&#123;</span><br><span class="line">        String imgDirPath = imgFilePath.substring(<span class="number">0</span>, index); </span><br><span class="line">        File imgDir = <span class="keyword">new</span> File(imgDirPath);</span><br><span class="line">        <span class="keyword">if</span>(!imgDir.exists())&#123;</span><br><span class="line">            <span class="keyword">boolean</span> mkdirs = imgDir.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Base64 base64 = <span class="keyword">new</span> Base64();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//Base64解码</span></span><br><span class="line">            <span class="keyword">byte</span>[] b = base64.decode(imgStr);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;b.length;++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(b[i]&lt;<span class="number">0</span>)&#123;<span class="comment">//调整异常数据</span></span><br><span class="line">                    b[i]+=<span class="number">256</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//生成jpeg图片</span></span><br><span class="line">            OutputStream out = <span class="keyword">new</span> FileOutputStream(imgFilePath);    </span><br><span class="line">            out.write(b);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> IO </tag>
            
            <tag> base64 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java公共方法工具类</title>
      <link href="/2019/04/11/Java%E5%85%AC%E5%85%B1%E6%96%B9%E6%B3%95%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2019/04/11/Java%E5%85%AC%E5%85%B1%E6%96%B9%E6%B3%95%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="一些公共方法"><a href="#一些公共方法" class="headerlink" title="一些公共方法"></a>一些公共方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.sql.Timestamp;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Java公共类方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/5/14 21:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java进行字符串转日期操作</span></span><br><span class="line"><span class="comment">     * 可转换格式为yyyy-MM-dd &amp; yyyy/MM/dd</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string 字符串类型时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Date</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">stringDtaeToDate</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line">        Date date = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (checkIsNullOrEmpty(string)) &#123;</span><br><span class="line">            String format = <span class="string">""</span>;</span><br><span class="line">            <span class="comment">//判断日期格式</span></span><br><span class="line">            <span class="keyword">if</span> (string.contains(<span class="string">"-"</span>)) &#123;</span><br><span class="line">                format = <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (string.contains(<span class="string">"/"</span>)) &#123;</span><br><span class="line">                format = <span class="string">"yyyy/MM/dd"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (string.contains(<span class="string">"."</span>)) &#123;</span><br><span class="line">                String[] split = string.split(<span class="string">"."</span>);</span><br><span class="line">                string = split[<span class="number">0</span>] + <span class="string">"-"</span> + split[<span class="number">1</span>] + <span class="string">"-"</span> + split[<span class="number">2</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> date;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//转换日期</span></span><br><span class="line">            DateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(format);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                date = dateFormat.parse(string);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"日期转换出错,字符串转日期类型传参为空!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java计算两个字符串类型的日期相差多少天</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> startDay  开始时间(字符串类型)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> endDay    结束时间(字符串类型)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">differcountDay</span><span class="params">(String startDay,String endDay)</span></span>&#123;</span><br><span class="line">        String format = <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line">        Long days = <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!checkIsNullOrEmpty(startDay) &amp;&amp; !checkIsNullOrEmpty(endDay))&#123;</span><br><span class="line">            <span class="comment">//判断日期格式</span></span><br><span class="line">            <span class="keyword">if</span>(startDay.contains(<span class="string">"/"</span>) &amp;&amp; endDay.contains(<span class="string">"/"</span>)) &#123;</span><br><span class="line">                format = <span class="string">"yyyy/MM/dd"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            DateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(format);</span><br><span class="line">            Date one;</span><br><span class="line">            Date two;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//去除空格</span></span><br><span class="line">            startDay = startDay.replaceAll(<span class="string">" "</span>, <span class="string">""</span>);</span><br><span class="line">            endDay = endDay.replaceAll(<span class="string">" "</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//计算时间</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                one = dateFormat.parse(startDay);</span><br><span class="line">                two = dateFormat.parse(endDay);</span><br><span class="line">                Long time1 = one.getTime();</span><br><span class="line">                Long time2 = two.getTime();</span><br><span class="line">                Long diff ;</span><br><span class="line">                diff = time2 - time1;</span><br><span class="line">                days = diff / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.out.println(<span class="string">"计算两个字符串类型的日期相差多少天出现错误"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> days.intValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前日期XX天之前的日期</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beforeDay XX天</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getBeforeXXDate</span><span class="params">(Integer beforeDay)</span></span>&#123;</span><br><span class="line">        Calendar now = Calendar.getInstance();</span><br><span class="line">        now.add(Calendar.DAY_OF_MONTH, -beforeDay);</span><br><span class="line">        String beforeDate = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy/MM/dd"</span>).format(now.getTime());</span><br><span class="line">        <span class="keyword">return</span> beforeDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java获取两个时间之间相差多长时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> startDay  开始时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> endDay    结束时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">oneTimeBetweenTwoTimeDate</span><span class="params">(Date startDay, Date endDay)</span> </span>&#123;</span><br><span class="line">        String result = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (!checkIsNullOrEmpty(startDay) &amp;&amp; !checkIsNullOrEmpty(endDay)) &#123;</span><br><span class="line">            SimpleDateFormat dfs = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss.SSS"</span>);</span><br><span class="line">            <span class="keyword">long</span> between = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//计算相差毫秒值</span></span><br><span class="line">                between = (endDay.getTime() - startDay.getTime());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//转换毫秒值</span></span><br><span class="line">            <span class="keyword">long</span> day = between / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">long</span> hour = (between / (<span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>) - day * <span class="number">24</span>);</span><br><span class="line">            <span class="keyword">long</span> min = ((between / (<span class="number">60</span> * <span class="number">1000</span>)) - day * <span class="number">24</span> * <span class="number">60</span> - hour * <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">long</span> s = (between / <span class="number">1000</span> - day * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - hour * <span class="number">60</span> * <span class="number">60</span> - min * <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">long</span> ms = (between - day * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> - hour * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> - min * <span class="number">60</span> * <span class="number">1000</span> - s * <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">            result = day + <span class="string">"天"</span> + hour + <span class="string">"小时"</span> + min + <span class="string">"分"</span> + s + <span class="string">"秒"</span> + ms + <span class="string">"毫秒"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result = <span class="string">"参数为空"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成固定长度的随机字符(仅包含大小写字母)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> len   随机字符长度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRandomLetterString</span><span class="params">(Integer len)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (Integer i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> intRand = (<span class="keyword">int</span>) (Math.random() * <span class="number">52</span>);</span><br><span class="line">            <span class="keyword">char</span> base = (intRand &lt; <span class="number">26</span>) ? <span class="string">'A'</span> : <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">char</span> c = (<span class="keyword">char</span>) (base + intRand % <span class="number">26</span>);</span><br><span class="line">            sb.append(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成固定长度的随机字母(包含大小写)和数字</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> len 需要的长度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRandomLetterAndNumberString</span><span class="params">(Integer len)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (Integer i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> intRand = (<span class="keyword">int</span>) (Math.random() * <span class="number">52</span>);</span><br><span class="line">            <span class="keyword">int</span> numValue = (<span class="keyword">int</span>) (Math.random() * <span class="number">10</span>);</span><br><span class="line">            <span class="keyword">char</span> base = (intRand &lt; <span class="number">26</span>) ? <span class="string">'A'</span> : <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">char</span> c = (<span class="keyword">char</span>) (base + intRand % <span class="number">26</span>);</span><br><span class="line">            <span class="keyword">if</span> (numValue % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                sb.append(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(numValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java判断字符串是否为数字</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string 字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">StringisNumber</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!checkIsNullOrEmpty(string)) &#123;</span><br><span class="line">            java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(<span class="string">"[0-9]*"</span>);</span><br><span class="line">            java.util.regex.Matcher match = pattern.matcher(string);</span><br><span class="line">            <span class="keyword">if</span> (match.matches() == <span class="keyword">false</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过全类名获取class，如com.*.**.*</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> className</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Class <span class="title">getClassByClassName</span><span class="params">(String className)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!checkIsNullOrEmpty(className))&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Class obj = Class.forName(className);</span><br><span class="line">                <span class="keyword">return</span> obj;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过request获取IP地址</span></span><br><span class="line"><span class="comment">     * 使用Nginx等反向代理软件， 则不能通过request.getRemoteAddr()获取IP地址</span></span><br><span class="line"><span class="comment">     * 如果使用了多级反向代理的话，X-Forwarded-For的值并不止一个，而是一串IP地址，X-Forwarded-For中第一个非unknown的有效IP字符串，则为真实IP地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getIpAddr</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        String ip = request.getHeader(<span class="string">"x-forwarded-for"</span>);</span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="keyword">null</span> || ip.length() == <span class="number">0</span> || <span class="string">"unknown"</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">"Proxy-Client-IP"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="keyword">null</span> || ip.length() == <span class="number">0</span> || <span class="string">"unknown"</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">"WL-Proxy-Client-IP"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="keyword">null</span> || ip.length() == <span class="number">0</span> || <span class="string">"unknown"</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            ip = request.getRemoteAddr();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"0:0:0:0:0:0:0:1"</span>.equals(ip) ? <span class="string">"127.0.0.1"</span> : ip;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @描述 判断数据是否为空</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkIsNullOrEmpty</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">            <span class="keyword">return</span> (obj == <span class="keyword">null</span> || (((String) obj).equals(<span class="string">""</span>)) || (((String) obj).equals(<span class="string">"null"</span>)) || ((String) obj).equals(<span class="string">"undefined"</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> obj == <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前时间(Timestamp格式MySQL字段)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Timestamp <span class="title">getTime</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Timestamp timestamp = <span class="keyword">new</span> Timestamp(<span class="keyword">new</span> Date().getTime());</span><br><span class="line">        <span class="keyword">return</span> timestamp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * StringDate转换为Timestamp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stringDate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Timestamp <span class="title">StringToTimestamp</span><span class="params">(String stringDate)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(stringDate.indexOf(<span class="string">":"</span>) == -<span class="number">1</span>)&#123;</span><br><span class="line">            stringDate = stringDate + <span class="string">" 12:00:00"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//用Timestamp的valueOf方法转化为Timestamp实体</span></span><br><span class="line">        Timestamp time = Timestamp.valueOf(stringDate);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MD5加密</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getMD5String</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 生成一个MD5加密计算摘要</span></span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">"MD5"</span>);</span><br><span class="line">            <span class="comment">// 计算md5函数</span></span><br><span class="line">            md.update(str.getBytes());</span><br><span class="line">            <span class="comment">// digest()最后确定返回md5 hash值，返回值为8位字符串。因为md5 hash值是16位的hex值，实际上就是8位的字符</span></span><br><span class="line">            <span class="comment">// BigInteger函数则将8位的字符串转换成16位hex值，用字符串来表示；得到字符串形式的hash值</span></span><br><span class="line">            <span class="comment">//一个byte是八位二进制，也就是2位十六进制字符（2的8次方等于16的2次方）</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BigInteger(<span class="number">1</span>, md.digest()).toString(<span class="number">16</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到当前系统日期(yyyy-MM-dd格式)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCurrentDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        TimeZone timeZone = TimeZone.getTimeZone(<span class="string">"Asia/Shanghai"</span>);</span><br><span class="line"></span><br><span class="line">        String pattern = <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line"></span><br><span class="line">        SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(pattern);</span><br><span class="line"></span><br><span class="line">        df.setTimeZone(timeZone);</span><br><span class="line"></span><br><span class="line">        Date today = <span class="keyword">new</span> Date();</span><br><span class="line"></span><br><span class="line">        String tString = df.format(today);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tString;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前系统时间，精确到秒</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Timestamp <span class="title">getCurrentDateAndTime</span><span class="params">()</span>  </span>&#123;</span><br><span class="line"></span><br><span class="line">        TimeZone timeZone = TimeZone.getTimeZone(<span class="string">"Asia/Shanghai"</span>);</span><br><span class="line"></span><br><span class="line">        String pattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line"></span><br><span class="line">        SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(pattern);</span><br><span class="line"></span><br><span class="line">        df.setTimeZone(timeZone);</span><br><span class="line"></span><br><span class="line">        Date today = <span class="keyword">new</span> Date();</span><br><span class="line"></span><br><span class="line">        String tString = df.format(today);</span><br><span class="line"></span><br><span class="line">        Timestamp timestamp = Timestamp.valueOf(tString);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> timestamp;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 格式化一个时间为yyyy-MM-dd类型的字符串时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> date</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">formatOneDate</span><span class="params">(Date date)</span></span>&#123;</span><br><span class="line">        TimeZone timeZone = TimeZone.getTimeZone(<span class="string">"Asia/Shanghai"</span>);</span><br><span class="line"></span><br><span class="line">        String pattern = <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line"></span><br><span class="line">        SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(pattern);</span><br><span class="line"></span><br><span class="line">        df.setTimeZone(timeZone);</span><br><span class="line"></span><br><span class="line">        String formatDate = df.format(date);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> formatDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将xxxx-xx-xx(xxxx/xx/xx)(xxxx.xx.xx)转换为xxxx年xx月xx日</span></span><br><span class="line"><span class="comment">     * 遇到0x月，或者0x日时，去掉前面的零</span></span><br><span class="line"><span class="comment">     * 例：FormatDateEx("2005-09-09") 返回2005年9月9日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stringDate xxxx年xx月xx日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">formatDateToString</span><span class="params">(String stringDate)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!checkIsNullOrEmpty(stringDate))&#123;</span><br><span class="line">            String flag;</span><br><span class="line">            <span class="keyword">if</span>(stringDate.contains(<span class="string">"/"</span>))&#123;</span><br><span class="line">                flag = <span class="string">"/"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringDate.contains(<span class="string">"-"</span>)) &#123;</span><br><span class="line">                flag = <span class="string">"-"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringDate.contains(<span class="string">"."</span>))&#123;</span><br><span class="line">                flag = <span class="string">"."</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//年月日</span></span><br><span class="line">            String year = stringDate.substring(<span class="number">0</span>, stringDate.indexOf(flag));</span><br><span class="line">            String month = stringDate.substring(stringDate.indexOf(flag) + <span class="number">1</span>,</span><br><span class="line">                    stringDate.lastIndexOf(flag));</span><br><span class="line">            String day = stringDate.substring(stringDate.lastIndexOf(flag) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//月前面去零</span></span><br><span class="line">            <span class="keyword">if</span> (month.startsWith(<span class="string">"0"</span>)) &#123;</span><br><span class="line">                month = month.substring(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//日前面去零</span></span><br><span class="line">            <span class="keyword">if</span> (day.startsWith(<span class="string">"0"</span>)) &#123;</span><br><span class="line">                day = day.substring(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            stringDate = year + <span class="string">"年"</span> + month + <span class="string">"月"</span> + day + <span class="string">"日"</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> stringDate;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得指定日期所在月的天数</span></span><br><span class="line"><span class="comment">     * 例如：输入2019-5-15(2019/5/15)(2019.5.15)</span></span><br><span class="line"><span class="comment">     *       获得31</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stringDate String   格式要求为yyyy－mm－dd(yyyy/mm/dd)(yyyy.mm.dd)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">getDaysForDate</span><span class="params">(String stringDate)</span> </span>&#123;</span><br><span class="line">        Date date = <span class="keyword">null</span>;</span><br><span class="line">        String format;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!checkIsNullOrEmpty(stringDate))&#123;</span><br><span class="line">            <span class="keyword">if</span>(stringDate.contains(<span class="string">"/"</span>))&#123;</span><br><span class="line">                format = <span class="string">"yyyy/MM/dd"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringDate.contains(<span class="string">"-"</span>)) &#123;</span><br><span class="line">                format = <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringDate.contains(<span class="string">"."</span>))&#123;</span><br><span class="line">                String[] split = stringDate.split(<span class="string">"."</span>);</span><br><span class="line">                format = split[<span class="number">0</span>] + <span class="string">"-"</span> + split[<span class="number">1</span>] + <span class="string">"-"</span> + split[<span class="number">2</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(format);</span><br><span class="line">            Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                date = sdf.parse(stringDate);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            calendar.setTime(date);</span><br><span class="line">            <span class="keyword">int</span> day = calendar.getActualMaximum(Calendar.DAY_OF_MONTH); <span class="comment">//天数</span></span><br><span class="line">            <span class="keyword">return</span> day;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java汉字转拼音</title>
      <link href="/2019/04/11/Java%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3/"/>
      <url>/2019/04/11/Java%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https:<span class="comment">//mvnrepository.com/artifact/com.belerweb/pinyin4j --&gt;</span></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.belerweb&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;pinyin4j&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.5.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="PinyinToolkit"><a href="#PinyinToolkit" class="headerlink" title="PinyinToolkit"></a>PinyinToolkit</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> net.sourceforge.pinyin4j.PinyinHelper;</span><br><span class="line"><span class="keyword">import</span> net.sourceforge.pinyin4j.format.HanyuPinyinCaseType;</span><br><span class="line"><span class="keyword">import</span> net.sourceforge.pinyin4j.format.HanyuPinyinOutputFormat;</span><br><span class="line"><span class="keyword">import</span> net.sourceforge.pinyin4j.format.HanyuPinyinToneType;</span><br><span class="line"><span class="keyword">import</span> net.sourceforge.pinyin4j.format.exception.BadHanyuPinyinOutputFormatCombination;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sinosoft.sss.utils.CommonUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PinyinToolkit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取汉字串拼音首字母，英文字符不变</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chinese</span></span><br><span class="line"><span class="comment">     *            汉字串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 汉语拼音首字母</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">cn2FirstSpell</span><span class="params">(String chinese)</span> </span>&#123;</span><br><span class="line">        StringBuffer pybf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">char</span>[] arr = chinese.toCharArray();</span><br><span class="line">        HanyuPinyinOutputFormat defaultFormat = <span class="keyword">new</span> HanyuPinyinOutputFormat();</span><br><span class="line">        defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);</span><br><span class="line">        defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; <span class="number">128</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    String[] _t = PinyinHelper.toHanyuPinyinStringArray(arr[i], defaultFormat);</span><br><span class="line">                    <span class="keyword">if</span> (_t != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        pybf.append(_t[<span class="number">0</span>].charAt(<span class="number">0</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (BadHanyuPinyinOutputFormatCombination e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                pybf.append(arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pybf.toString().replaceAll(<span class="string">"\\W"</span>, <span class="string">""</span>).trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取汉字串拼音，英文字符不变</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chinese</span></span><br><span class="line"><span class="comment">     *            汉字串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 汉语拼音</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">cn2Spell</span><span class="params">(String chinese)</span> </span>&#123;</span><br><span class="line">        StringBuffer pybf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">char</span>[] arr = chinese.toCharArray();</span><br><span class="line">        HanyuPinyinOutputFormat defaultFormat = <span class="keyword">new</span> HanyuPinyinOutputFormat();</span><br><span class="line">        defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);</span><br><span class="line">        defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; <span class="number">128</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    String[] pinyin = PinyinHelper.toHanyuPinyinStringArray(arr[i], defaultFormat);</span><br><span class="line">                    <span class="keyword">if</span>(!CommonUtil.checkIsNullOrEmpty(pinyin)&amp;&amp;!CommonUtil.checkIsNullOrEmpty(pinyin[<span class="number">0</span>]))&#123;</span><br><span class="line">                        pybf.append(pinyin[<span class="number">0</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (BadHanyuPinyinOutputFormatCombination e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                pybf.append(arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pybf.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line">        String x = <span class="string">"世，界"</span>;</span><br><span class="line">        System.out.println(cn2FirstSpell(x));</span><br><span class="line">        System.out.println(cn2Spell(x));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>freeMark获取ftl转HTML输入流</title>
      <link href="/2019/04/11/freeMark%E8%8E%B7%E5%8F%96ftl%E8%BD%ACHTML%E8%BE%93%E5%85%A5%E6%B5%81/"/>
      <url>/2019/04/11/freeMark%E8%8E%B7%E5%8F%96ftl%E8%BD%ACHTML%E8%BE%93%E5%85%A5%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--freemarker--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.freemarker&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;freemarker&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.3.23&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="FtlToHTML"><a href="#FtlToHTML" class="headerlink" title="FtlToHTML"></a>FtlToHTML</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> freemarker.template.Configuration;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.Template;</span><br><span class="line"><span class="keyword">import</span> freemarker.template.TemplateException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/5/7 14:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FtlToHTML</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将解析ftl并且赋值之后的文件内容返回流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> templateName 模板文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root 数据Map</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> InputStream <span class="title">printInputStream</span><span class="params">(String templateName, Map&lt;String,Object&gt; root, HttpSession session)</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line">        StringWriter out = <span class="keyword">new</span> StringWriter();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建fm的配置</span></span><br><span class="line">            Configuration config = <span class="keyword">new</span> Configuration();</span><br><span class="line">            <span class="comment">//指定默认编码格式</span></span><br><span class="line">            config.setDefaultEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">            <span class="comment">//设置模版文件的路径</span></span><br><span class="line">            String ftlPath = session.getServletContext().getRealPath(<span class="string">"/responsiveUI/model/pc"</span>);</span><br><span class="line">            config.setDirectoryForTemplateLoading(<span class="keyword">new</span> File(ftlPath));</span><br><span class="line">            <span class="comment">//获得模版包</span></span><br><span class="line">            Template template = config.getTemplate(templateName);</span><br><span class="line">            template.process(root, out);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (TemplateException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(out!=<span class="keyword">null</span>) out.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回输入流(设置编码集为UTF-8)</span></span><br><span class="line">        InputStream is = <span class="keyword">new</span> ByteArrayInputStream(out.toString().getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">        <span class="keyword">return</span> is;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IO </tag>
            
            <tag> freeMark </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>freeMark遍历list集合</title>
      <link href="/2019/04/11/freeMark%E9%81%8D%E5%8E%86list%E9%9B%86%E5%90%88/"/>
      <url>/2019/04/11/freeMark%E9%81%8D%E5%8E%86list%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--freemarker--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.freemarker&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;freemarker&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.3.23&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; resultArray = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">resultArray.add(<span class="string">"集合元素1"</span>);</span><br><span class="line">resultArray.add(<span class="string">"集合元素2"</span>);</span><br><span class="line">resultArray.add(<span class="string">"集合元素3"</span>);</span><br><span class="line"><span class="keyword">return</span> resultArray;</span><br></pre></td></tr></table></figure><h2 id="HTML-amp-ftl"><a href="#HTML-amp-ftl" class="headerlink" title="HTML&amp;ftl"></a>HTML&amp;ftl</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list 要遍历的集合元素 as 当前遍历元素&gt;</span><br><span class="line">&lt;span&gt;当前遍历元素&lt;/span&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line">&lt;#list resultArray as result&gt;</span><br><span class="line">&lt;span&gt;元素:$&#123;result&#125;&lt;/span&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> freeMark </tag>
            
            <tag> List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>freemark遍历Map集合</title>
      <link href="/2019/04/11/freemark%E9%81%8D%E5%8E%86Map%E9%9B%86%E5%90%88/"/>
      <url>/2019/04/11/freemark%E9%81%8D%E5%8E%86Map%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--freemarker--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.freemarker&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;freemarker&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.3.23&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, String&gt; resultMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">resultMap.put(<span class="string">"K"</span>,<span class="string">"V"</span>);</span><br><span class="line">resultMap.put(<span class="string">"Key"</span>,<span class="string">"Value"</span>);</span><br><span class="line"><span class="keyword">return</span> resultMap;</span><br></pre></td></tr></table></figure><h2 id="HTML-amp-ftl"><a href="#HTML-amp-ftl" class="headerlink" title="HTML&amp;ftl"></a>HTML&amp;ftl</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list resultMap?keys as key&gt;</span><br><span class="line">&lt;span&gt;这是key:$&#123;key&#125;&lt;/span&gt;</span><br><span class="line">&lt;span&gt;这是value:$&#123;resultMap[key]&#125;&lt;/span&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> freeMark </tag>
            
            <tag> Map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux运行jar包报错UnsupportedClassVersionError</title>
      <link href="/2019/04/11/Linux%E8%BF%90%E8%A1%8Cjar%E5%8C%85%E6%8A%A5%E9%94%99UnsupportedClassVersionError/"/>
      <url>/2019/04/11/Linux%E8%BF%90%E8%A1%8Cjar%E5%8C%85%E6%8A%A5%E9%94%99UnsupportedClassVersionError/</url>
      
        <content type="html"><![CDATA[<h2 id="UnsupportedClassVersionError"><a href="#UnsupportedClassVersionError" class="headerlink" title="UnsupportedClassVersionError"></a>UnsupportedClassVersionError</h2><p>出现 java.lang.UnsupportedClassVersionError 错误的原因，是因为我们使用高版本的JDK编译的Java class文件试图在较低版本的JVM上运行，所报的错误。</p><p>如图所示:</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/f3fc18a6c47b2ce4.jpg" alt></p><p>解决方案:重装JDK，使JDK版本与jar包的JDK版本一致.</p><a id="more"></a><p>重装前:</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/c2e42f76bfd21060.jpg" alt></p><p>重装后:</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/6a34b1ea8552c5f3.jpg" alt></p><p>这时重新启动，就好了</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/e9adb5abac1ed17d.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Error </tag>
            
            <tag> Linux </tag>
            
            <tag> Jar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot配置日志</title>
      <link href="/2019/04/11/springboot%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97/"/>
      <url>/2019/04/11/springboot%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--web(还包含了logback日志的依赖)--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>application-dev.yml</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#日志</span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    root: info</span><br><span class="line">    com.bootdo: debug</span><br></pre></td></tr></table></figure><a id="more"></a><p>resources下添加logback-spring.xml</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!--logback日志的jar包，在Springboot的web里已经有依赖了--&gt;</span><br><span class="line">    &lt;include resource=<span class="string">"org/springframework/boot/logging/logback/base.xml"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;logger name=<span class="string">"项目的顶级包名"</span> level=<span class="string">"DEBUG"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;springProfile name=<span class="string">"staging"</span>&gt;</span><br><span class="line">        &lt;logger name=<span class="string">"项目的顶级包名"</span> level=<span class="string">"TRACE"</span> /&gt;</span><br><span class="line">    &lt;/springProfile&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>其他配置可见<a href="http://106.13.51.1:8200/index.php/2019/05/12/springboot%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" target="_blank" rel="noopener">springboot多环境配置</a></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(类名.class);</span><br><span class="line">如:</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(JeysApplication.class);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Springboot </tag>
            
            <tag> Log </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot多环境配置</title>
      <link href="/2019/04/11/springboot%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
      <url>/2019/04/11/springboot%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>这是我用过的配置文件，其中有freemarker、jpa、阿里数据源、redis的配置，如果项目中不使用或使用其他删除替换即可，yml文件注意换行与进退格间距</p><p>yml格式:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  session-timeout: <span class="number">1800</span></span><br><span class="line">  tomcat:</span><br><span class="line">    maxHttpHeaderSize: <span class="number">102400</span></span><br><span class="line">  port: <span class="number">80</span></span><br><span class="line">server:</span><br><span class="line">  session-timeout: <span class="number">1800</span></span><br><span class="line">  tomcat:</span><br><span class="line">    maxHttpHeaderSize: <span class="number">102400</span></span><br><span class="line">  port: <span class="number">80</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="主配置-application-yml"><a href="#主配置-application-yml" class="headerlink" title="主配置(application.yml)"></a>主配置(application.yml)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  session-timeout: 1800 #session过期时间</span><br><span class="line">#    tomcat:</span><br><span class="line">#        max-threads: 1000</span><br><span class="line">#        min-spare-threads: 30</span><br><span class="line">  tomcat:</span><br><span class="line">    maxHttpHeaderSize: 102400 #请求头大小</span><br><span class="line">  port: 80 #项目端口号</span><br><span class="line">#    uri-encoding: utf-8</span><br><span class="line">#security:</span><br><span class="line">#  basic:</span><br><span class="line">#    enabled: false</span><br><span class="line">spring:</span><br><span class="line">  freemarker: #freemarker配置</span><br><span class="line">    suffix: .html</span><br><span class="line">    template-loader-path: classpath:/templates/</span><br><span class="line">    allow-request-override: <span class="keyword">false</span></span><br><span class="line">    cache: <span class="keyword">false</span></span><br><span class="line">    check-template-location: <span class="keyword">true</span></span><br><span class="line">    charset: UTF-<span class="number">8</span></span><br><span class="line">    content-type: text/html</span><br><span class="line">    expose-request-attributes: <span class="keyword">false</span></span><br><span class="line">    expose-session-attributes: <span class="keyword">false</span></span><br><span class="line">    expose-spring-macro-helpers: <span class="keyword">false</span></span><br><span class="line">  jackson:</span><br><span class="line">    time-zone: GMT+<span class="number">8</span></span><br><span class="line">    date-format: yyyy-MM-dd HH:mm:ss</span><br><span class="line">  profiles: </span><br><span class="line">    active: dev #使用什么环境的配置</span><br><span class="line">#  servlet:</span><br><span class="line">#    multipart:</span><br><span class="line">#      max-file-size: 30Mb</span><br><span class="line">#      max-request-size: 30Mb</span><br><span class="line">#  devtools:</span><br><span class="line">#    restart:</span><br><span class="line">#      enabled: true</span><br><span class="line">#  cache:</span><br><span class="line">#    type: ehcache</span><br><span class="line">#    ehcache:</span><br><span class="line">#      config: classpath:config/ehcache.xml</span><br><span class="line">  #JPA Configuration:</span><br><span class="line">  jpa: #jpa配置</span><br><span class="line">    database: MYSQL #使用什么数据库</span><br><span class="line">    # Show or not log for each sql query</span><br><span class="line">    show-sql: <span class="keyword">true</span></span><br><span class="line">    generate-ddl: <span class="keyword">true</span></span><br><span class="line">    # Hibernate ddl auto (create, create-drop, update)</span><br><span class="line">    hibernate: #hibernate配置</span><br><span class="line">      ddl-auto: none #不自动建表</span><br><span class="line">      # spring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect</span><br><span class="line">      naming_strategy: org.hibernate.cfg.ImprovedNamingStrategy</span><br><span class="line">      # spring.jpa.database=org.hibernate.dialect.MySQL5InnoDBDialect</span><br><span class="line">      dialect: org.hibernate.dialect.MySQL5Dialect</span><br></pre></td></tr></table></figure><h2 id="副配置-application-dev-yml"><a href="#副配置-application-dev-yml" class="headerlink" title="副配置(application-dev.yml)"></a>副配置(application-dev.yml)</h2><p>可创建多个副配置，在主配置中随时切换环境</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#日志</span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    root: info</span><br><span class="line">    com.bootdo: debug</span><br><span class="line">spring:</span><br><span class="line">  #阿里数据源，MySQL数据库</span><br><span class="line">  datasource:</span><br><span class="line">    type: com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">    driverClassName: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql:<span class="comment">//IP:端口号(MySQL默认为3306)/数据库名称?useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line">    username: 数据库账号</span><br><span class="line">    password: 数据库密码</span><br><span class="line">    initialSize: <span class="number">1</span></span><br><span class="line">    minIdle: <span class="number">3</span></span><br><span class="line">    maxActive: <span class="number">20</span></span><br><span class="line">    # 配置获取连接等待超时的时间</span><br><span class="line">    maxWait: <span class="number">60000</span></span><br><span class="line">    # 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</span><br><span class="line">    timeBetweenEvictionRunsMillis: <span class="number">60000</span></span><br><span class="line">    # 配置一个连接在池中最小生存的时间，单位是毫秒</span><br><span class="line">    minEvictableIdleTimeMillis: <span class="number">30000</span></span><br><span class="line">    validationQuery: select <span class="string">'x'</span></span><br><span class="line">    testWhileIdle: <span class="keyword">true</span></span><br><span class="line">    testOnBorrow: <span class="keyword">false</span></span><br><span class="line">    testOnReturn: <span class="keyword">false</span></span><br><span class="line">    # 打开PSCache，并且指定每个连接上PSCache的大小</span><br><span class="line">    poolPreparedStatements: <span class="keyword">true</span></span><br><span class="line">    maxPoolPreparedStatementPerConnectionSize: <span class="number">20</span></span><br><span class="line">    # 配置监控统计拦截的filters，去掉后监控界面sql无法统计，'wall'用于防火墙</span><br><span class="line">    filters: stat,wall,slf4j</span><br><span class="line">    # 通过connectProperties属性来打开mergeSql功能；慢SQL记录</span><br><span class="line">    connectionProperties: druid.stat.mergeSql=<span class="keyword">true</span>;druid.stat.slowSqlMillis=<span class="number">5000</span></span><br><span class="line">    # 合并多个DruidDataSource的监控数据</span><br><span class="line">    #useGlobalDataSourceStat: true</span><br><span class="line">  redis: #Redis配置</span><br><span class="line">    host: IP</span><br><span class="line">    port: 端口号(redis默认为<span class="number">6379</span>)</span><br><span class="line">    password: Redis密码</span><br><span class="line">    # 连接超时时间（毫秒）</span><br><span class="line">    timeout: <span class="number">10000</span></span><br><span class="line">    jedis:</span><br><span class="line">      pool:</span><br><span class="line">        # 连接池中的最大空闲连接</span><br><span class="line">        max-idle: <span class="number">8</span></span><br><span class="line">        # 连接池中的最小空闲连接</span><br><span class="line">        min-idle: <span class="number">10</span></span><br><span class="line">        # 连接池最大连接数（使用负值表示没有限制）</span><br><span class="line">        max-active: <span class="number">100</span></span><br><span class="line">        # 连接池最大阻塞等待时间（使用负值表示没有限制）</span><br><span class="line">        max-wait: -<span class="number">1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Springboot </tag>
            
            <tag> yml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java进行HTTP请求</title>
      <link href="/2019/04/11/Java%E8%BF%9B%E8%A1%8CHTTP%E8%AF%B7%E6%B1%82/"/>
      <url>/2019/04/11/Java%E8%BF%9B%E8%A1%8CHTTP%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<h2 id="pom"><a href="#pom" class="headerlink" title="pom"></a>pom</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--java访问http/https--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.5.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="HttpClient工具类"><a href="#HttpClient工具类" class="headerlink" title="HttpClient工具类"></a>HttpClient工具类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: HttpClient工具类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/1/8 14:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpClientUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**请求编码*/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_CHARSET = <span class="string">"UTF-8"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 执行HTTP POST请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param 参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpPostWithJSON</span><span class="params">(String url, Map&lt;String, ?&gt; param)</span> </span>&#123;</span><br><span class="line">        CloseableHttpClient client = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(url == <span class="keyword">null</span> || url.trim().length() == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"URL is null"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            HttpPost httpPost = <span class="keyword">new</span> HttpPost(url);</span><br><span class="line">            client = HttpClients.createDefault();</span><br><span class="line">            <span class="keyword">if</span>(param != <span class="keyword">null</span>)&#123;</span><br><span class="line">                StringEntity entity = <span class="keyword">new</span> StringEntity(param.toString(), DEFAULT_CHARSET);<span class="comment">//解决中文乱码问题</span></span><br><span class="line">                entity.setContentEncoding(DEFAULT_CHARSET);</span><br><span class="line">                entity.setContentType(<span class="string">"application/json"</span>);</span><br><span class="line">                httpPost.setEntity(entity);</span><br><span class="line">            &#125;</span><br><span class="line">            HttpResponse resp = client.execute(httpPost);</span><br><span class="line">            <span class="keyword">if</span>(resp.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> EntityUtils.toString(resp.getEntity(), DEFAULT_CHARSET);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            close(client);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 执行HTTP GET请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param 参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpGetWithJSON</span><span class="params">(String url, Map&lt;String, ?&gt; param)</span> </span>&#123;</span><br><span class="line">        CloseableHttpClient client = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(url == <span class="keyword">null</span> || url.trim().length() == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"URL is null"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client = HttpClients.createDefault();</span><br><span class="line">            <span class="keyword">if</span>(param != <span class="keyword">null</span>)&#123;</span><br><span class="line">                StringBuffer sb = <span class="keyword">new</span> StringBuffer(<span class="string">"?"</span>);</span><br><span class="line">                <span class="keyword">for</span> (String key : param.keySet())&#123;</span><br><span class="line">                    sb.append(key).append(<span class="string">"="</span>).append(param.get(key)).append(<span class="string">"&amp;"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                url = url.concat(sb.toString());</span><br><span class="line">                url = url.substring(<span class="number">0</span>, url.length()-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            HttpGet httpGet = <span class="keyword">new</span> HttpGet(url);</span><br><span class="line">            HttpResponse resp = client.execute(httpGet);</span><br><span class="line">            <span class="keyword">if</span>(resp.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> EntityUtils.toString(resp.getEntity(), DEFAULT_CHARSET);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            close(client);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭HTTP请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> client</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(CloseableHttpClient client)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(client == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            client.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试用例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Map param = <span class="keyword">new</span> HashMap();</span><br><span class="line">        param.put(<span class="string">"userName"</span>, <span class="string">"admin"</span>);</span><br><span class="line">        param.put(<span class="string">"password"</span>, <span class="string">"mao2080"</span>);</span><br><span class="line">        String result = httpGetWithJSON(<span class="string">"https://www.baidu.com/"</span>, param);</span><br><span class="line">        System.out.println(<span class="string">"result:"</span>+result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java解析XML为JSON数据</title>
      <link href="/2019/04/11/Java%E8%A7%A3%E6%9E%90XML%E4%B8%BAJSON%E6%95%B0%E6%8D%AE/"/>
      <url>/2019/04/11/Java%E8%A7%A3%E6%9E%90XML%E4%B8%BAJSON%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="XmlToJson"><a href="#XmlToJson" class="headerlink" title="XmlToJson"></a>XmlToJson</h2><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: xml解析为json</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: 無曦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreateDate</span>: 2019/5/13 9:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlToJson</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据XML内容转换为json</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> xmlContent</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title">xmlContentToJson</span><span class="params">(String xmlContent)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SAXReader reader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">        Document document = reader.read(<span class="keyword">new</span> ByteArrayInputStream(xmlContent.getBytes(<span class="string">"UTF-8"</span>)));</span><br><span class="line">        JSONObject jsonObject = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        <span class="comment">//获取根节点元素对象</span></span><br><span class="line">        Element root = document.getRootElement();</span><br><span class="line">        iterateNodes(root, jsonObject);</span><br><span class="line">        <span class="keyword">return</span> jsonObject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据xml文件路径转换为json</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> xmlfilePath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title">xmlFiletoJson</span><span class="params">(String xmlfilePath)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SAXReader reader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">        Document document = reader.read(<span class="keyword">new</span> File(xmlfilePath).toString());</span><br><span class="line">        JSONObject jsonObject = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        <span class="comment">//获取根节点元素对象</span></span><br><span class="line">        Element root = document.getRootElement();</span><br><span class="line">        iterateNodes(root, jsonObject);</span><br><span class="line">        <span class="keyword">return</span> jsonObject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">iterateNodes</span><span class="params">(Element node,JSONObject json)</span></span>&#123;</span><br><span class="line">        <span class="comment">//获取当前元素的名称</span></span><br><span class="line">        String nodeName = node.getName();</span><br><span class="line">        <span class="comment">//判断已遍历的JSON中是否已经有了该元素的名称</span></span><br><span class="line">        <span class="keyword">if</span>(json.containsKey(nodeName))&#123;</span><br><span class="line">            <span class="comment">//该元素在同级下有多个</span></span><br><span class="line">            Object Object = json.get(nodeName);</span><br><span class="line">            JSONArray array = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span>(Object <span class="keyword">instanceof</span> JSONArray)&#123;</span><br><span class="line">                array = (JSONArray) Object;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                array = <span class="keyword">new</span> JSONArray();</span><br><span class="line">                array.add(Object);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//获取该元素下所有子元素</span></span><br><span class="line">            List&lt;Element&gt; listElement = node.elements();</span><br><span class="line">            <span class="keyword">if</span>(listElement.isEmpty())&#123;</span><br><span class="line">                <span class="comment">//该元素无子元素，获取元素的值</span></span><br><span class="line">                String nodeValue = node.getTextTrim();</span><br><span class="line">                array.add(nodeValue);</span><br><span class="line">                json.put(nodeName, array);</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//有子元素</span></span><br><span class="line">            JSONObject newJson = <span class="keyword">new</span> JSONObject();</span><br><span class="line">            <span class="comment">//遍历所有子元素</span></span><br><span class="line">            <span class="keyword">for</span>(Element e:listElement)&#123;</span><br><span class="line">                <span class="comment">//递归</span></span><br><span class="line">                iterateNodes(e,newJson);</span><br><span class="line">            &#125;</span><br><span class="line">            array.add(newJson);</span><br><span class="line">            json.put(nodeName, array);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//该元素同级下第一次遍历</span></span><br><span class="line">        <span class="comment">//获取该元素下所有子元素</span></span><br><span class="line">        List&lt;Element&gt; listElement = node.elements();</span><br><span class="line">        <span class="keyword">if</span>(listElement.isEmpty())&#123;</span><br><span class="line">            <span class="comment">//该元素无子元素，获取元素的值</span></span><br><span class="line">            String nodeValue = node.getTextTrim();</span><br><span class="line">            json.put(nodeName, nodeValue);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//有子节点，新建一个JSONObject来存储该节点下子节点的值</span></span><br><span class="line">        JSONObject object = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        <span class="comment">//遍历所有一级子节点</span></span><br><span class="line">        <span class="keyword">for</span>(Element e:listElement)&#123;</span><br><span class="line">            <span class="comment">//递归</span></span><br><span class="line">            iterateNodes(e,object);</span><br><span class="line">        &#125;</span><br><span class="line">        json.put(nodeName, object);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JSONObject XMLjsonObject = XmlToJson.xmlContentToJson(<span class="string">"XML内容字符串"</span>);</span><br><span class="line">JSONObject XMLjsonObject = XmlToJson.xmlFiletoJson(<span class="string">"XML文件路径"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
            <tag> JSON </tag>
            
            <tag> XML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux常用命令</title>
      <link href="/2019/04/11/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/04/11/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>显示当前目录下所有文件以及目录(包含详细信息)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll</span><br></pre></td></tr></table></figure><p>进入目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">cd /</span><br><span class="line">cd 目录名</span><br><span class="line">cd .. 返回上一路径</span><br></pre></td></tr></table></figure><a id="more"></a><p>查看当前路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwd</span><br></pre></td></tr></table></figure><p>创建目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir 目录名</span><br><span class="line">mkdit -p /一级目录名/二级目录名/三级目录名/...（没有-p的话必须上级目录存在才能创建底下一级目录）</span><br></pre></td></tr></table></figure><p>删除文件或目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">删除文件 </span><br><span class="line">rm [文件名](会询问是否删除Y/N)</span><br><span class="line">rm -i [文件名](询问删除)</span><br><span class="line"></span><br><span class="line">删除目录 </span><br><span class="line">rm -r [目录名](会询问是否删除Y/N)</span><br><span class="line">rm -ir [目录](询问删除)/rm -ri [目录](询问删除)</span><br><span class="line"></span><br><span class="line">删除文件或目录 </span><br><span class="line">rm -rf [文件名/目录名](不询问直接删除)</span><br><span class="line"></span><br><span class="line">删除任何.log文件；删除前逐一询问确认</span><br><span class="line">     rm -i *.log</span><br><span class="line"></span><br><span class="line">慎用：</span><br><span class="line">删除以-f开头的文件</span><br><span class="line"> rm -- -f*</span><br><span class="line">删除以-f开头的目录</span><br><span class="line"> rm --r -f*</span><br></pre></td></tr></table></figure><p>移动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">将文件一重命名为文件二</span><br><span class="line">mv [文件一名称] [文件二名称](直接修改)</span><br><span class="line">mv -i [文件一名称] [文件二名称](询问修改)</span><br><span class="line"></span><br><span class="line">将文件文件一,文件一,文件一移动到某目录中</span><br><span class="line">mv [文件一名称] [文件二名称] [文件三名称] /目录名(可多层)</span><br><span class="line"></span><br><span class="line">移动当前文件夹下的所有文件到上一级目录</span><br><span class="line">mv * ../</span><br></pre></td></tr></table></figure><p>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-i 提示</span><br><span class="line"></span><br><span class="line">-r 复制目录及目录内所有项目</span><br><span class="line"></span><br><span class="line">-a 复制的文件与原文件时间一样</span><br><span class="line"></span><br><span class="line">询问是否复制某文件到某目录，复制后会保存原时间</span><br><span class="line">cp -ia [文件名] [目录名]</span><br></pre></td></tr></table></figure><p>查看文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">进入文件</span><br><span class="line">vim [文件名]</span><br><span class="line"></span><br><span class="line">向下翻一屏</span><br><span class="line">Ctrl + F</span><br><span class="line">向上翻一屏</span><br><span class="line">Ctrl + B</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">搜索</span><br><span class="line">/搜索的内容 按回车</span><br><span class="line">撤销</span><br><span class="line">u</span><br></pre></td></tr></table></figure><p>​    </p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux安装Redis</title>
      <link href="/2019/04/11/Linux%E5%AE%89%E8%A3%85Redis/"/>
      <url>/2019/04/11/Linux%E5%AE%89%E8%A3%85Redis/</url>
      
        <content type="html"><![CDATA[<p>获取redis资源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-4.0.8.tar.gz</span><br></pre></td></tr></table></figure><p>解压</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf redis-4.0.8.tar.gz</span><br></pre></td></tr></table></figure><a id="more"></a><p>安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">进入Redis目录</span><br><span class="line">cd redis-4.0.8</span><br><span class="line">编译</span><br><span class="line">make</span><br><span class="line">如果报错，有可能是Linux没有gcc环境，需要安装gcc</span><br><span class="line">yum -y install gcc</span><br><span class="line">进入src目录</span><br><span class="line">cd src</span><br><span class="line">安装</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>将redis加入到开机启动（可以不操作这部）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/rc.local //在里面添加内容：/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf (意思就是开机调用这段开启redis的命令)</span><br></pre></td></tr></table></figure><p>查看Redis是否安装成功(客户端与服务端)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whereis redis-cli</span><br><span class="line">whereis redis-server</span><br></pre></td></tr></table></figure><p>进入Redis后查看Redis密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config get requirepass</span><br><span class="line">1) &quot;requirepass&quot;</span><br><span class="line">2) &quot;&quot;（没有设置密码）</span><br></pre></td></tr></table></figure><p>进入Redis目录，打开redis.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi redis.conf</span><br><span class="line">把daemonize设置为yes(可以用配置文件redis.conf后台启动Redis)</span><br><span class="line">取消requirepass的注释，并且设置密码</span><br><span class="line">bind 127.0.0.1改为 #bind 127.0.0.1(取消只能本地访问，允许远程访问)</span><br><span class="line">protected-mode yes 改为 protected-mode no(取消保护模式)</span><br></pre></td></tr></table></figure><p>关闭Redis<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli shutdown</span><br></pre></td></tr></table></figure></p><p>前台启动Redis<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/redis-server</span><br></pre></td></tr></table></figure></p><p>后台启动redis<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">　　/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf</span><br></pre></td></tr></table></figure></p><p>后台启动Redis(用redis.conf启动Redis需要进入Redis的src目录找到redis-server)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@ src]# redis-server ../redis.conf</span><br><span class="line">出现以下内容说明启动成功：</span><br><span class="line">35515:C 25 Dec 10:38:24.729 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">35515:C 25 Dec 10:38:24.729 # Redis version=4.0.8, bits=64, commit=00000000, modified=0, pid=35515, just started</span><br><span class="line">35515:C 25 Dec 10:38:24.729 # Configuration loaded</span><br></pre></td></tr></table></figure><p>启动Redis客户端( ~目录和Redis下的src目录都可以)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@ src]# redis-cli -p 6379</span><br></pre></td></tr></table></figure><p>查看所有键(报错需要密码)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">(error) NOAUTH Authentication required.</span><br></pre></td></tr></table></figure><p>输入密码（能进去就成功了）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; auth 密码</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Js校验邮件地址</title>
      <link href="/2019/04/11/Js%E6%A0%A1%E9%AA%8C%E9%82%AE%E4%BB%B6%E5%9C%B0%E5%9D%80/"/>
      <url>/2019/04/11/Js%E6%A0%A1%E9%AA%8C%E9%82%AE%E4%BB%B6%E5%9C%B0%E5%9D%80/</url>
      
        <content type="html"><![CDATA[<h2 id="Js获取校验邮件地址"><a href="#Js获取校验邮件地址" class="headerlink" title="Js获取校验邮件地址"></a>Js获取校验邮件地址</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//邮箱校验</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMail</span>(<span class="params">mailvalue</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> mailReg = <span class="regexp">/^(\w-*\.*)+@(\w-?)+(\.\w&#123;2,&#125;)+$/</span>;</span><br><span class="line">    <span class="keyword">if</span>(checkStringIsNotNull(mailvalue) &amp;&amp; mailReg.test(mailvalue))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端校验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Js判断字符串是否为空</title>
      <link href="/2019/04/11/Js%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA/"/>
      <url>/2019/04/11/Js%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="Js判断字符串是否为空"><a href="#Js判断字符串是否为空" class="headerlink" title="Js判断字符串是否为空"></a>Js判断字符串是否为空</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符串是否为空</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStringIsNotNull</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(string != <span class="literal">undefined</span> &amp;&amp; string != <span class="literal">null</span> &amp;&amp; string != <span class="string">""</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端校验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot设置项目启动banner</title>
      <link href="/2019/04/11/SpringBoot%E8%AE%BE%E7%BD%AE%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8banner/"/>
      <url>/2019/04/11/SpringBoot%E8%AE%BE%E7%BD%AE%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8banner/</url>
      
        <content type="html"><![CDATA[<h3 id="打开Project-Structure"><a href="#打开Project-Structure" class="headerlink" title="打开Project Structure"></a>打开Project Structure</h3><p>在resources目录下创建一个banner.txt文件(名字不可更改)，如下图</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/0f575cdfa758a519.png" alt></p><p>推荐一个在线生成banner的网站:<a href="https://www.bootschool.net/ascii" target="_blank" rel="noopener">banner</a></p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Springboot </tag>
            
            <tag> banner </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot生成jar包及其所有依赖包</title>
      <link href="/2019/04/11/SpringBoot%E7%94%9F%E6%88%90jar%E5%8C%85%E5%8F%8A%E5%85%B6%E6%89%80%E6%9C%89%E4%BE%9D%E8%B5%96%E5%8C%85/"/>
      <url>/2019/04/11/SpringBoot%E7%94%9F%E6%88%90jar%E5%8C%85%E5%8F%8A%E5%85%B6%E6%89%80%E6%9C%89%E4%BE%9D%E8%B5%96%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h3 id="打开Project-Structure"><a href="#打开Project-Structure" class="headerlink" title="打开Project Structure"></a>打开Project Structure</h3><p>方式一</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/bc24464cbcf8989a.png" alt></p><a id="more"></a><p>方式二</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/10619e1b4eaa7363.png" alt></p><h3 id="从module生成Artfacts"><a href="#从module生成Artfacts" class="headerlink" title="从module生成Artfacts"></a>从module生成Artfacts</h3><p><img src="http://106.13.51.1:8100/imgs/2019/05/8a493d09c54310e3.png" alt></p><h3 id="准备信息"><a href="#准备信息" class="headerlink" title="准备信息"></a>准备信息</h3><ul><li>Main Class选择springboot的启动类</li><li>从项目生成Artfacts</li><li>MANIFEST.MF文件选择生成在resouces目录下(如果该目录下已有MANIFEST.MF文件请删掉)</li></ul><p><img src="http://106.13.51.1:8100/imgs/2019/05/f11259b0ca1dc289.png" alt></p><p><img src="http://106.13.51.1:8100/imgs/2019/05/7628e7be0bb727de.png" alt></p><h3 id="编译Artfacts"><a href="#编译Artfacts" class="headerlink" title="编译Artfacts"></a>编译Artfacts</h3><p><img src="http://106.13.51.1:8100/imgs/2019/05/9896882f1781c4dc.png" alt></p><h3 id="生成jar"><a href="#生成jar" class="headerlink" title="生成jar"></a>生成jar</h3><p>如果是首次点击build,迭代则Rebuild</p><p><img src="http://106.13.51.1:8100/imgs/2019/05/4bb0fe3424f9def9.png" alt></p><h2 id="最后会在out目录下生成项目jar包以及所有依赖包"><a href="#最后会在out目录下生成项目jar包以及所有依赖包" class="headerlink" title="最后会在out目录下生成项目jar包以及所有依赖包"></a>最后会在out目录下生成项目jar包以及所有依赖包</h2><p><img src="http://106.13.51.1:8100/imgs/2019/05/3667b8ede028d94a.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jar </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux安装MySQL</title>
      <link href="/2019/04/11/Linux%E5%AE%89%E8%A3%85MySQL/"/>
      <url>/2019/04/11/Linux%E5%AE%89%E8%A3%85MySQL/</url>
      
        <content type="html"><![CDATA[<p>下载MySQL(rpm版)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</span><br></pre></td></tr></table></figure><p>安装MySQL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm ivh mysql57-community-release-el7-9.noarch.rpm</span><br></pre></td></tr></table></figure><a id="more"></a><p>查看MySQL临时密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &apos;temporary password&apos; /var/log/mysqld.log</span><br></pre></td></tr></table></figure><p>进入MySQL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>修改密码策略(第一条为修改为只需满足长度要求，第二条为设置长度最低为4，此处设置小于4也会按4处理)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_policy=0;</span><br><span class="line">set global validate_password_length=4;</span><br></pre></td></tr></table></figure><p>修改密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user user() identified by &apos;密码&apos;;</span><br></pre></td></tr></table></figure><p>以权限用户root登录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>选择mysql库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;use mysql;</span><br></pre></td></tr></table></figure><p>查看mysql库中的user表的host值（即可进行连接访问的主机/IP名称）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;select &apos;host&apos; from user where user=&apos;root&apos;;</span><br></pre></td></tr></table></figure><p>修改host值（以通配符%的内容增加主机/IP地址），当然也可以直接增加IP地址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;update user set host = &apos;%&apos; where user =&apos;root&apos;;</span><br></pre></td></tr></table></figure><p>刷新MySQL的系统权限相关表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;flush privileges;</span><br></pre></td></tr></table></figure><p>再重新查看user表时有修改</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;select &apos;host&apos;   from user where user=&apos;root&apos;;</span><br></pre></td></tr></table></figure><p>如果上述命令没有问题<strong>就可以远程连接MySQL了</strong></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Js校验手机号</title>
      <link href="/2019/04/11/Js%E6%A0%A1%E9%AA%8C%E6%89%8B%E6%9C%BA%E5%8F%B7/"/>
      <url>/2019/04/11/Js%E6%A0%A1%E9%AA%8C%E6%89%8B%E6%9C%BA%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<h2 id="Js获取校验邮件地址"><a href="#Js获取校验邮件地址" class="headerlink" title="Js获取校验邮件地址"></a>Js获取校验邮件地址</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//手机号校验</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPhone</span>(<span class="params">phonevalue</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> phoneReg = <span class="regexp">/^1[3-578]\d&#123;9&#125;$/</span>;</span><br><span class="line">    <span class="keyword">if</span>(checkStringIsNotNull(phonevalue) &amp;&amp; phoneReg.test(phonevalue))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端校验 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
